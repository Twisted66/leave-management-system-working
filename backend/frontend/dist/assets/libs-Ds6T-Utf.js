var Rn=r=>{throw TypeError(r)};var ys=(r,e,t)=>e.has(r)||Rn("Cannot "+t);var f=(r,e,t)=>(ys(r,e,"read from private field"),t?t.call(r):e.get(r)),R=(r,e,t)=>e.has(r)?Rn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),T=(r,e,t,s)=>(ys(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),I=(r,e,t)=>(ys(r,e,"access private method"),t);var qr=(r,e,t,s)=>({set _(n){T(r,e,n,t)},get _(){return f(r,e,s)}});import{r as es,a as Xo}from"./vendor-CGag14uw.js";function Zo(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function ea(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var n=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,n.get?n:{enumerable:!0,get:function(){return r[s]}})}),t}var vs={exports:{}},ws={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jn;function ta(){return jn||(jn=1,(function(r){function e(b,A){var D=b.length;b.push(A);e:for(;0<D;){var H=D-1>>>1,X=b[H];if(0<n(X,A))b[H]=A,b[D]=X,D=H;else break e}}function t(b){return b.length===0?null:b[0]}function s(b){if(b.length===0)return null;var A=b[0],D=b.pop();if(D!==A){b[0]=D;e:for(var H=0,X=b.length,te=X>>>1;H<te;){var ee=2*(H+1)-1,Ge=b[ee],Te=ee+1,K=b[Te];if(0>n(Ge,D))Te<X&&0>n(K,Ge)?(b[H]=K,b[Te]=D,H=Te):(b[H]=Ge,b[ee]=D,H=ee);else if(Te<X&&0>n(K,D))b[H]=K,b[Te]=D,H=Te;else break e}}return A}function n(b,A){var D=b.sortIndex-A.sortIndex;return D!==0?D:b.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,h=null,d=3,g=!1,m=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(b){for(var A=t(l);A!==null;){if(A.callback===null)s(l);else if(A.startTime<=b)s(l),A.sortIndex=A.expirationTime,e(c,A);else break;A=t(l)}}function w(b){if(p=!1,v(b),!m)if(t(c)!==null)m=!0,G(S);else{var A=t(l);A!==null&&V(w,A.startTime-b)}}function S(b,A){m=!1,p&&(p=!1,_(x),x=-1),g=!0;var D=d;try{for(v(A),h=t(c);h!==null&&(!(h.expirationTime>A)||b&&!Q());){var H=h.callback;if(typeof H=="function"){h.callback=null,d=h.priorityLevel;var X=H(h.expirationTime<=A);A=r.unstable_now(),typeof X=="function"?h.callback=X:h===t(c)&&s(c),v(A)}else s(c);h=t(c)}if(h!==null)var te=!0;else{var ee=t(l);ee!==null&&V(w,ee.startTime-A),te=!1}return te}finally{h=null,d=D,g=!1}}var O=!1,C=null,x=-1,j=5,$=-1;function Q(){return!(r.unstable_now()-$<j)}function B(){if(C!==null){var b=r.unstable_now();$=b;var A=!0;try{A=C(!0,b)}finally{A?Y():(O=!1,C=null)}}else O=!1}var Y;if(typeof k=="function")Y=function(){k(B)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,le=J.port2;J.port1.onmessage=B,Y=function(){le.postMessage(null)}}else Y=function(){y(B,0)};function G(b){C=b,O||(O=!0,Y())}function V(b,A){x=y(function(){b(r.unstable_now())},A)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(b){b.callback=null},r.unstable_continueExecution=function(){m||g||(m=!0,G(S))},r.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<b?Math.floor(1e3/b):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(b){switch(d){case 1:case 2:case 3:var A=3;break;default:A=d}var D=d;d=A;try{return b()}finally{d=D}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(b,A){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var D=d;d=b;try{return A()}finally{d=D}},r.unstable_scheduleCallback=function(b,A,D){var H=r.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?H+D:H):D=H,b){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=D+X,b={id:u++,callback:A,priorityLevel:b,startTime:D,expirationTime:X,sortIndex:-1},D>H?(b.sortIndex=D,e(l,b),t(c)===null&&b===t(l)&&(p?(_(x),x=-1):p=!0,V(w,D-H))):(b.sortIndex=X,e(c,b),m||g||(m=!0,G(S))),b},r.unstable_shouldYield=Q,r.unstable_wrapCallback=function(b){var A=d;return function(){var D=d;d=A;try{return b.apply(this,arguments)}finally{d=D}}}})(ws)),ws}var Dn;function pd(){return Dn||(Dn=1,vs.exports=ta()),vs.exports}var cr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ir=typeof window>"u"||"Deno"in globalThis;function ve(){}function ra(r,e){return typeof r=="function"?r(e):r}function $s(r){return typeof r=="number"&&r>=0&&r!==1/0}function Qi(r,e){return Math.max(r+(e||0)-Date.now(),0)}function ct(r,e){return typeof r=="function"?r(e):r}function we(r,e){return typeof r=="function"?r(e):r}function Mn(r,e){const{type:t="all",exact:s,fetchStatus:n,predicate:i,queryKey:o,stale:a}=r;if(o){if(s){if(e.queryHash!==gn(o,e.options))return!1}else if(!Or(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||n&&n!==e.state.fetchStatus||i&&!i(e))}function In(r,e){const{exact:t,status:s,predicate:n,mutationKey:i}=r;if(i){if(!e.options.mutationKey)return!1;if(t){if(Et(e.options.mutationKey)!==Et(i))return!1}else if(!Or(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function gn(r,e){return((e==null?void 0:e.queryKeyHashFn)||Et)(r)}function Et(r){return JSON.stringify(r,(e,t)=>Ls(t)?Object.keys(t).sort().reduce((s,n)=>(s[n]=t[n],s),{}):t)}function Or(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>Or(r[t],e[t])):!1}function Yi(r,e){if(r===e)return r;const t=$n(r)&&$n(e);if(t||Ls(r)&&Ls(e)){const s=t?r:Object.keys(r),n=s.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{},c=new Set(s);let l=0;for(let u=0;u<o;u++){const h=t?u:i[u];(!t&&c.has(h)||t)&&r[h]===void 0&&e[h]===void 0?(a[h]=void 0,l++):(a[h]=Yi(r[h],e[h]),a[h]===r[h]&&r[h]!==void 0&&l++)}return n===o&&l===n?r:a}return e}function ts(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function $n(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Ls(r){if(!Ln(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Ln(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Ln(r){return Object.prototype.toString.call(r)==="[object Object]"}function sa(r){return new Promise(e=>{setTimeout(e,r)})}function Us(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Yi(r,e):e}function na(r,e,t=0){const s=[...r,e];return t&&s.length>t?s.slice(1):s}function ia(r,e,t=0){const s=[e,...r];return t&&s.length>t?s.slice(0,-1):s}var mn=Symbol();function Ji(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===mn?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function yd(r,e){return typeof r=="function"?r(...e):!!r}var wt,Ze,Gt,Fi,oa=(Fi=class extends cr{constructor(){super();R(this,wt);R(this,Ze);R(this,Gt);T(this,Gt,e=>{if(!ir&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){f(this,Ze)||this.setEventListener(f(this,Gt))}onUnsubscribe(){var e;this.hasListeners()||((e=f(this,Ze))==null||e.call(this),T(this,Ze,void 0))}setEventListener(e){var t;T(this,Gt,e),(t=f(this,Ze))==null||t.call(this),T(this,Ze,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){f(this,wt)!==e&&(T(this,wt,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof f(this,wt)=="boolean"?f(this,wt):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},wt=new WeakMap,Ze=new WeakMap,Gt=new WeakMap,Fi),pn=new oa,Vt,et,Kt,Ni,aa=(Ni=class extends cr{constructor(){super();R(this,Vt,!0);R(this,et);R(this,Kt);T(this,Kt,e=>{if(!ir&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){f(this,et)||this.setEventListener(f(this,Kt))}onUnsubscribe(){var e;this.hasListeners()||((e=f(this,et))==null||e.call(this),T(this,et,void 0))}setEventListener(e){var t;T(this,Kt,e),(t=f(this,et))==null||t.call(this),T(this,et,e(this.setOnline.bind(this)))}setOnline(e){f(this,Vt)!==e&&(T(this,Vt,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return f(this,Vt)}},Vt=new WeakMap,et=new WeakMap,Kt=new WeakMap,Ni),rs=new aa;function Fs(){let r,e;const t=new Promise((n,i)=>{r=n,e=i});t.status="pending",t.catch(()=>{});function s(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{s({status:"fulfilled",value:n}),r(n)},t.reject=n=>{s({status:"rejected",reason:n}),e(n)},t}function ca(r){return Math.min(1e3*2**r,3e4)}function Xi(r){return(r??"online")==="online"?rs.isOnline():!0}var Zi=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function eo(r){let e=!1,t=0,s;const n=Fs(),i=()=>n.status!=="pending",o=p=>{var y;i()||(d(new Zi(p)),(y=r.abort)==null||y.call(r))},a=()=>{e=!0},c=()=>{e=!1},l=()=>pn.isFocused()&&(r.networkMode==="always"||rs.isOnline())&&r.canRun(),u=()=>Xi(r.networkMode)&&r.canRun(),h=p=>{i()||(s==null||s(),n.resolve(p))},d=p=>{i()||(s==null||s(),n.reject(p))},g=()=>new Promise(p=>{var y;s=_=>{(i()||l())&&p(_)},(y=r.onPause)==null||y.call(r)}).then(()=>{var p;s=void 0,i()||(p=r.onContinue)==null||p.call(r)}),m=()=>{if(i())return;let p;const y=t===0?r.initialPromise:void 0;try{p=y??r.fn()}catch(_){p=Promise.reject(_)}Promise.resolve(p).then(h).catch(_=>{var O;if(i())return;const k=r.retry??(ir?0:3),v=r.retryDelay??ca,w=typeof v=="function"?v(t,_):v,S=k===!0||typeof k=="number"&&t<k||typeof k=="function"&&k(t,_);if(e||!S){d(_);return}t++,(O=r.onFail)==null||O.call(r,t,_),sa(w).then(()=>l()?void 0:g()).then(()=>{e?d(_):m()})})};return{promise:n,status:()=>n.status,cancel:o,continue:()=>(s==null||s(),n),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?m():g().then(m),n)}}var la=r=>setTimeout(r,0);function ua(){let r=[],e=0,t=a=>{a()},s=a=>{a()},n=la;const i=a=>{e?r.push(a):n(()=>{t(a)})},o=()=>{const a=r;r=[],a.length&&n(()=>{s(()=>{a.forEach(c=>{t(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{s=a},setScheduler:a=>{n=a}}}var ce=ua(),bt,qi,to=(qi=class{constructor(){R(this,bt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$s(this.gcTime)&&T(this,bt,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(ir?1/0:300*1e3))}clearGcTimeout(){f(this,bt)&&(clearTimeout(f(this,bt)),T(this,bt,void 0))}},bt=new WeakMap,qi),Qt,Yt,ye,_t,ae,Ar,kt,_e,Le,Wi,ha=(Wi=class extends to{constructor(e){super();R(this,_e);R(this,Qt);R(this,Yt);R(this,ye);R(this,_t);R(this,ae);R(this,Ar);R(this,kt);T(this,kt,!1),T(this,Ar,e.defaultOptions),this.setOptions(e.options),this.observers=[],T(this,_t,e.client),T(this,ye,f(this,_t).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,T(this,Qt,da(this.options)),this.state=e.state??f(this,Qt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=f(this,ae))==null?void 0:e.promise}setOptions(e){this.options={...f(this,Ar),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&f(this,ye).remove(this)}setData(e,t){const s=Us(this.state.data,e,this.options);return I(this,_e,Le).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){I(this,_e,Le).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,n;const t=(s=f(this,ae))==null?void 0:s.promise;return(n=f(this,ae))==null||n.cancel(e),t?t.then(ve).catch(ve):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(f(this,Qt))}isActive(){return this.observers.some(e=>we(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ct(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Qi(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=f(this,ae))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=f(this,ae))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),f(this,ye).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(f(this,ae)&&(f(this,kt)?f(this,ae).cancel({revert:!0}):f(this,ae).cancelRetry()),this.scheduleGc()),f(this,ye).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||I(this,_e,Le).call(this,{type:"invalidate"})}async fetch(e,t){var c,l,u,h,d,g,m,p,y,_,k,v;if(this.state.fetchStatus!=="idle"&&((c=f(this,ae))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(f(this,ae))return f(this,ae).continueRetry(),f(this,ae).promise}if(e&&this.setOptions(e),!this.options.queryFn){const w=this.observers.find(S=>S.options.queryFn);w&&this.setOptions(w.options)}const s=new AbortController,n=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(T(this,kt,!0),s.signal)})},i=()=>{const w=Ji(this.options,t),O=(()=>{const C={client:f(this,_t),queryKey:this.queryKey,meta:this.meta};return n(C),C})();return T(this,kt,!1),this.options.persister?this.options.persister(w,O,this):w(O)},a=(()=>{const w={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:f(this,_t),state:this.state,fetchFn:i};return n(w),w})();(l=this.options.behavior)==null||l.onFetch(a,this),T(this,Yt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&I(this,_e,Le).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),T(this,ae,eo({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onFail:(w,S)=>{I(this,_e,Le).call(this,{type:"failed",failureCount:w,error:S})},onPause:()=>{I(this,_e,Le).call(this,{type:"pause"})},onContinue:()=>{I(this,_e,Le).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const w=await f(this,ae).start();if(w===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(w),(g=(d=f(this,ye).config).onSuccess)==null||g.call(d,w,this),(p=(m=f(this,ye).config).onSettled)==null||p.call(m,w,this.state.error,this),w}catch(w){if(w instanceof Zi){if(w.silent)return f(this,ae).promise;if(w.revert){if(this.setState({...f(this,Yt),fetchStatus:"idle"}),this.state.data===void 0)throw w;return this.state.data}}throw I(this,_e,Le).call(this,{type:"error",error:w}),(_=(y=f(this,ye).config).onError)==null||_.call(y,w,this),(v=(k=f(this,ye).config).onSettled)==null||v.call(k,this.state.data,w,this),w}finally{this.scheduleGc()}}},Qt=new WeakMap,Yt=new WeakMap,ye=new WeakMap,_t=new WeakMap,ae=new WeakMap,Ar=new WeakMap,kt=new WeakMap,_e=new WeakSet,Le=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...ro(s.data,this.options),fetchMeta:e.meta??null};case"success":const n={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return T(this,Yt,e.manual?n:void 0),n;case"error":const i=e.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),ce.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),f(this,ye).notify({query:this,type:"updated",action:e})})},Wi);function ro(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xi(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function da(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,s=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Pe,Bi,fa=(Bi=class extends cr{constructor(e={}){super();R(this,Pe);this.config=e,T(this,Pe,new Map)}build(e,t,s){const n=t.queryKey,i=t.queryHash??gn(n,t);let o=this.get(i);return o||(o=new ha({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){f(this,Pe).has(e.queryHash)||(f(this,Pe).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=f(this,Pe).get(e.queryHash);t&&(e.destroy(),t===e&&f(this,Pe).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ce.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return f(this,Pe).get(e)}getAll(){return[...f(this,Pe).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Mn(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>Mn(e,s)):t}notify(e){ce.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ce.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ce.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Pe=new WeakMap,Bi),Ce,he,St,Ae,Ye,zi,ga=(zi=class extends to{constructor(e){super();R(this,Ae);R(this,Ce);R(this,he);R(this,St);this.mutationId=e.mutationId,T(this,he,e.mutationCache),T(this,Ce,[]),this.state=e.state||so(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){f(this,Ce).includes(e)||(f(this,Ce).push(e),this.clearGcTimeout(),f(this,he).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){T(this,Ce,f(this,Ce).filter(t=>t!==e)),this.scheduleGc(),f(this,he).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){f(this,Ce).length||(this.state.status==="pending"?this.scheduleGc():f(this,he).remove(this))}continue(){var e;return((e=f(this,St))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,h,d,g,m,p,y,_,k,v,w,S,O,C,x;const t=()=>{I(this,Ae,Ye).call(this,{type:"continue"})};T(this,St,eo({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(j,$)=>{I(this,Ae,Ye).call(this,{type:"failed",failureCount:j,error:$})},onPause:()=>{I(this,Ae,Ye).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>f(this,he).canRun(this)}));const s=this.state.status==="pending",n=!f(this,St).canStart();try{if(s)t();else{I(this,Ae,Ye).call(this,{type:"pending",variables:e,isPaused:n}),await((o=(i=f(this,he).config).onMutate)==null?void 0:o.call(i,e,this));const $=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));$!==this.state.context&&I(this,Ae,Ye).call(this,{type:"pending",context:$,variables:e,isPaused:n})}const j=await f(this,St).start();return await((u=(l=f(this,he).config).onSuccess)==null?void 0:u.call(l,j,e,this.state.context,this)),await((d=(h=this.options).onSuccess)==null?void 0:d.call(h,j,e,this.state.context)),await((m=(g=f(this,he).config).onSettled)==null?void 0:m.call(g,j,null,this.state.variables,this.state.context,this)),await((y=(p=this.options).onSettled)==null?void 0:y.call(p,j,null,e,this.state.context)),I(this,Ae,Ye).call(this,{type:"success",data:j}),j}catch(j){try{throw await((k=(_=f(this,he).config).onError)==null?void 0:k.call(_,j,e,this.state.context,this)),await((w=(v=this.options).onError)==null?void 0:w.call(v,j,e,this.state.context)),await((O=(S=f(this,he).config).onSettled)==null?void 0:O.call(S,void 0,j,this.state.variables,this.state.context,this)),await((x=(C=this.options).onSettled)==null?void 0:x.call(C,void 0,j,e,this.state.context)),j}finally{I(this,Ae,Ye).call(this,{type:"error",error:j})}}finally{f(this,he).runNext(this)}}},Ce=new WeakMap,he=new WeakMap,St=new WeakMap,Ae=new WeakSet,Ye=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ce.batch(()=>{f(this,Ce).forEach(s=>{s.onMutationUpdate(e)}),f(this,he).notify({mutation:this,type:"updated",action:e})})},zi);function so(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ne,ke,Rr,Hi,ma=(Hi=class extends cr{constructor(e={}){super();R(this,Ne);R(this,ke);R(this,Rr);this.config=e,T(this,Ne,new Set),T(this,ke,new Map),T(this,Rr,0)}build(e,t,s){const n=new ga({mutationCache:this,mutationId:++qr(this,Rr)._,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){f(this,Ne).add(e);const t=Wr(e);if(typeof t=="string"){const s=f(this,ke).get(t);s?s.push(e):f(this,ke).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(f(this,Ne).delete(e)){const t=Wr(e);if(typeof t=="string"){const s=f(this,ke).get(t);if(s)if(s.length>1){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}else s[0]===e&&f(this,ke).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Wr(e);if(typeof t=="string"){const s=f(this,ke).get(t),n=s==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){var s;const t=Wr(e);if(typeof t=="string"){const n=(s=f(this,ke).get(t))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ce.batch(()=>{f(this,Ne).forEach(e=>{this.notify({type:"removed",mutation:e})}),f(this,Ne).clear(),f(this,ke).clear()})}getAll(){return Array.from(f(this,Ne))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>In(t,s))}findAll(e={}){return this.getAll().filter(t=>In(e,t))}notify(e){ce.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ce.batch(()=>Promise.all(e.map(t=>t.continue().catch(ve))))}},Ne=new WeakMap,ke=new WeakMap,Rr=new WeakMap,Hi);function Wr(r){var e;return(e=r.options.scope)==null?void 0:e.id}function Un(r){return{onFetch:(e,t)=>{var u,h,d,g,m;const s=e.options,n=(d=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:d.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let p=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},_=Ji(e.options,e.fetchOptions),k=async(v,w,S)=>{if(p)return Promise.reject();if(w==null&&v.pages.length)return Promise.resolve(v);const C=(()=>{const Q={client:e.client,queryKey:e.queryKey,pageParam:w,direction:S?"backward":"forward",meta:e.options.meta};return y(Q),Q})(),x=await _(C),{maxPages:j}=e.options,$=S?ia:na;return{pages:$(v.pages,x,j),pageParams:$(v.pageParams,w,j)}};if(n&&i.length){const v=n==="backward",w=v?pa:Fn,S={pages:i,pageParams:o},O=w(s,S);a=await k(S,O,v)}else{const v=r??i.length;do{const w=c===0?o[0]??s.initialPageParam:Fn(s,a);if(c>0&&w==null)break;a=await k(a,w),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var p,y;return(y=(p=e.options).persister)==null?void 0:y.call(p,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=l}}}function Fn(r,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?r.getNextPageParam(e[s],e,t[s],t):void 0}function pa(r,{pages:e,pageParams:t}){var s;return e.length>0?(s=r.getPreviousPageParam)==null?void 0:s.call(r,e[0],e,t[0],t):void 0}var Z,tt,rt,Jt,Xt,st,Zt,er,Gi,vd=(Gi=class{constructor(r={}){R(this,Z);R(this,tt);R(this,rt);R(this,Jt);R(this,Xt);R(this,st);R(this,Zt);R(this,er);T(this,Z,r.queryCache||new fa),T(this,tt,r.mutationCache||new ma),T(this,rt,r.defaultOptions||{}),T(this,Jt,new Map),T(this,Xt,new Map),T(this,st,0)}mount(){qr(this,st)._++,f(this,st)===1&&(T(this,Zt,pn.subscribe(async r=>{r&&(await this.resumePausedMutations(),f(this,Z).onFocus())})),T(this,er,rs.subscribe(async r=>{r&&(await this.resumePausedMutations(),f(this,Z).onOnline())})))}unmount(){var r,e;qr(this,st)._--,f(this,st)===0&&((r=f(this,Zt))==null||r.call(this),T(this,Zt,void 0),(e=f(this,er))==null||e.call(this),T(this,er,void 0))}isFetching(r){return f(this,Z).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return f(this,tt).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=f(this,Z).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=f(this,Z).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(ct(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(r){return f(this,Z).findAll(r).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(r,e,t){const s=this.defaultQueryOptions({queryKey:r}),n=f(this,Z).get(s.queryHash),i=n==null?void 0:n.state.data,o=ra(e,i);if(o!==void 0)return f(this,Z).build(this,s).setData(o,{...t,manual:!0})}setQueriesData(r,e,t){return ce.batch(()=>f(this,Z).findAll(r).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=f(this,Z).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=f(this,Z);ce.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=f(this,Z);return ce.batch(()=>(t.findAll(r).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},s=ce.batch(()=>f(this,Z).findAll(r).map(n=>n.cancel(t)));return Promise.all(s).then(ve).catch(ve)}invalidateQueries(r,e={}){return ce.batch(()=>(f(this,Z).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=ce.batch(()=>f(this,Z).findAll(r).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,t);return t.throwOnError||(i=i.catch(ve)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(ve)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=f(this,Z).build(this,e);return t.isStaleByTime(ct(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(ve).catch(ve)}fetchInfiniteQuery(r){return r.behavior=Un(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(ve).catch(ve)}ensureInfiniteQueryData(r){return r.behavior=Un(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return rs.isOnline()?f(this,tt).resumePausedMutations():Promise.resolve()}getQueryCache(){return f(this,Z)}getMutationCache(){return f(this,tt)}getDefaultOptions(){return f(this,rt)}setDefaultOptions(r){T(this,rt,r)}setQueryDefaults(r,e){f(this,Jt).set(Et(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...f(this,Jt).values()],t={};return e.forEach(s=>{Or(r,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(r,e){f(this,Xt).set(Et(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...f(this,Xt).values()],t={};return e.forEach(s=>{Or(r,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...f(this,rt).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=gn(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===mn&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...f(this,rt).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){f(this,Z).clear(),f(this,tt).clear()}},Z=new WeakMap,tt=new WeakMap,rt=new WeakMap,Jt=new WeakMap,Xt=new WeakMap,st=new WeakMap,Zt=new WeakMap,er=new WeakMap,Gi),fe,F,jr,de,xt,tr,qe,nt,Dr,rr,sr,Ot,Tt,it,nr,N,vr,Ns,qs,Ws,Bs,zs,Hs,Gs,no,Vi,wd=(Vi=class extends cr{constructor(e,t){super();R(this,N);R(this,fe);R(this,F);R(this,jr);R(this,de);R(this,xt);R(this,tr);R(this,qe);R(this,nt);R(this,Dr);R(this,rr);R(this,sr);R(this,Ot);R(this,Tt);R(this,it);R(this,nr,new Set);this.options=t,T(this,fe,e),T(this,nt,null),T(this,qe,Fs()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(f(this,F).addObserver(this),Nn(f(this,F),this.options)?I(this,N,vr).call(this):this.updateResult(),I(this,N,Bs).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Vs(f(this,F),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Vs(f(this,F),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,I(this,N,zs).call(this),I(this,N,Hs).call(this),f(this,F).removeObserver(this)}setOptions(e){const t=this.options,s=f(this,F);if(this.options=f(this,fe).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof we(this.options.enabled,f(this,F))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");I(this,N,Gs).call(this),f(this,F).setOptions(this.options),t._defaulted&&!ts(this.options,t)&&f(this,fe).getQueryCache().notify({type:"observerOptionsUpdated",query:f(this,F),observer:this});const n=this.hasListeners();n&&qn(f(this,F),s,this.options,t)&&I(this,N,vr).call(this),this.updateResult(),n&&(f(this,F)!==s||we(this.options.enabled,f(this,F))!==we(t.enabled,f(this,F))||ct(this.options.staleTime,f(this,F))!==ct(t.staleTime,f(this,F)))&&I(this,N,Ns).call(this);const i=I(this,N,qs).call(this);n&&(f(this,F)!==s||we(this.options.enabled,f(this,F))!==we(t.enabled,f(this,F))||i!==f(this,it))&&I(this,N,Ws).call(this,i)}getOptimisticResult(e){const t=f(this,fe).getQueryCache().build(f(this,fe),e),s=this.createResult(t,e);return va(this,s)&&(T(this,de,s),T(this,tr,this.options),T(this,xt,f(this,F).state)),s}getCurrentResult(){return f(this,de)}trackResult(e,t){return new Proxy(e,{get:(s,n)=>(this.trackProp(n),t==null||t(n),n==="promise"&&!this.options.experimental_prefetchInRender&&f(this,qe).status==="pending"&&f(this,qe).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(s,n))})}trackProp(e){f(this,nr).add(e)}getCurrentQuery(){return f(this,F)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=f(this,fe).defaultQueryOptions(e),s=f(this,fe).getQueryCache().build(f(this,fe),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return I(this,N,vr).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),f(this,de)))}createResult(e,t){var j;const s=f(this,F),n=this.options,i=f(this,de),o=f(this,xt),a=f(this,tr),l=e!==s?e.state:f(this,jr),{state:u}=e;let h={...u},d=!1,g;if(t._optimisticResults){const $=this.hasListeners(),Q=!$&&Nn(e,t),B=$&&qn(e,s,t,n);(Q||B)&&(h={...h,...ro(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:p,status:y}=h;g=h.data;let _=!1;if(t.placeholderData!==void 0&&g===void 0&&y==="pending"){let $;i!=null&&i.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData)?($=i.data,_=!0):$=typeof t.placeholderData=="function"?t.placeholderData((j=f(this,sr))==null?void 0:j.state.data,f(this,sr)):t.placeholderData,$!==void 0&&(y="success",g=Us(i==null?void 0:i.data,$,t),d=!0)}if(t.select&&g!==void 0&&!_)if(i&&g===(o==null?void 0:o.data)&&t.select===f(this,Dr))g=f(this,rr);else try{T(this,Dr,t.select),g=t.select(g),g=Us(i==null?void 0:i.data,g,t),T(this,rr,g),T(this,nt,null)}catch($){T(this,nt,$)}f(this,nt)&&(m=f(this,nt),g=f(this,rr),p=Date.now(),y="error");const k=h.fetchStatus==="fetching",v=y==="pending",w=y==="error",S=v&&k,O=g!==void 0,x={status:y,fetchStatus:h.fetchStatus,isPending:v,isSuccess:y==="success",isError:w,isInitialLoading:S,isLoading:S,data:g,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>l.dataUpdateCount||h.errorUpdateCount>l.errorUpdateCount,isFetching:k,isRefetching:k&&!v,isLoadingError:w&&!O,isPaused:h.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:w&&O,isStale:yn(e,t),refetch:this.refetch,promise:f(this,qe),isEnabled:we(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const $=Y=>{x.status==="error"?Y.reject(x.error):x.data!==void 0&&Y.resolve(x.data)},Q=()=>{const Y=T(this,qe,x.promise=Fs());$(Y)},B=f(this,qe);switch(B.status){case"pending":e.queryHash===s.queryHash&&$(B);break;case"fulfilled":(x.status==="error"||x.data!==B.value)&&Q();break;case"rejected":(x.status!=="error"||x.error!==B.reason)&&Q();break}}return x}updateResult(){const e=f(this,de),t=this.createResult(f(this,F),this.options);if(T(this,xt,f(this,F).state),T(this,tr,this.options),f(this,xt).data!==void 0&&T(this,sr,f(this,F)),ts(t,e))return;T(this,de,t);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!f(this,nr).size)return!0;const o=new Set(i??f(this,nr));return this.options.throwOnError&&o.add("error"),Object.keys(f(this,de)).some(a=>{const c=a;return f(this,de)[c]!==e[c]&&o.has(c)})};I(this,N,no).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&I(this,N,Bs).call(this)}},fe=new WeakMap,F=new WeakMap,jr=new WeakMap,de=new WeakMap,xt=new WeakMap,tr=new WeakMap,qe=new WeakMap,nt=new WeakMap,Dr=new WeakMap,rr=new WeakMap,sr=new WeakMap,Ot=new WeakMap,Tt=new WeakMap,it=new WeakMap,nr=new WeakMap,N=new WeakSet,vr=function(e){I(this,N,Gs).call(this);let t=f(this,F).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ve)),t},Ns=function(){I(this,N,zs).call(this);const e=ct(this.options.staleTime,f(this,F));if(ir||f(this,de).isStale||!$s(e))return;const s=Qi(f(this,de).dataUpdatedAt,e)+1;T(this,Ot,setTimeout(()=>{f(this,de).isStale||this.updateResult()},s))},qs=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(f(this,F)):this.options.refetchInterval)??!1},Ws=function(e){I(this,N,Hs).call(this),T(this,it,e),!(ir||we(this.options.enabled,f(this,F))===!1||!$s(f(this,it))||f(this,it)===0)&&T(this,Tt,setInterval(()=>{(this.options.refetchIntervalInBackground||pn.isFocused())&&I(this,N,vr).call(this)},f(this,it)))},Bs=function(){I(this,N,Ns).call(this),I(this,N,Ws).call(this,I(this,N,qs).call(this))},zs=function(){f(this,Ot)&&(clearTimeout(f(this,Ot)),T(this,Ot,void 0))},Hs=function(){f(this,Tt)&&(clearInterval(f(this,Tt)),T(this,Tt,void 0))},Gs=function(){const e=f(this,fe).getQueryCache().build(f(this,fe),this.options);if(e===f(this,F))return;const t=f(this,F);T(this,F,e),T(this,jr,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},no=function(e){ce.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(f(this,de))}),f(this,fe).getQueryCache().notify({query:f(this,F),type:"observerResultsUpdated"})})},Vi);function ya(r,e){return we(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function Nn(r,e){return ya(r,e)||r.state.data!==void 0&&Vs(r,e,e.refetchOnMount)}function Vs(r,e,t){if(we(e.enabled,r)!==!1&&ct(e.staleTime,r)!=="static"){const s=typeof t=="function"?t(r):t;return s==="always"||s!==!1&&yn(r,e)}return!1}function qn(r,e,t,s){return(r!==e||we(s.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&yn(r,t)}function yn(r,e){return we(e.enabled,r)!==!1&&r.isStaleByTime(ct(e.staleTime,r))}function va(r,e){return!ts(r.getCurrentResult(),e)}var ot,at,ge,We,Be,Zr,Ks,Ki,bd=(Ki=class extends cr{constructor(e,t){super();R(this,Be);R(this,ot);R(this,at);R(this,ge);R(this,We);T(this,ot,e),this.setOptions(t),this.bindMethods(),I(this,Be,Zr).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var s;const t=this.options;this.options=f(this,ot).defaultMutationOptions(e),ts(this.options,t)||f(this,ot).getMutationCache().notify({type:"observerOptionsUpdated",mutation:f(this,ge),observer:this}),t!=null&&t.mutationKey&&this.options.mutationKey&&Et(t.mutationKey)!==Et(this.options.mutationKey)?this.reset():((s=f(this,ge))==null?void 0:s.state.status)==="pending"&&f(this,ge).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=f(this,ge))==null||e.removeObserver(this)}onMutationUpdate(e){I(this,Be,Zr).call(this),I(this,Be,Ks).call(this,e)}getCurrentResult(){return f(this,at)}reset(){var e;(e=f(this,ge))==null||e.removeObserver(this),T(this,ge,void 0),I(this,Be,Zr).call(this),I(this,Be,Ks).call(this)}mutate(e,t){var s;return T(this,We,t),(s=f(this,ge))==null||s.removeObserver(this),T(this,ge,f(this,ot).getMutationCache().build(f(this,ot),this.options)),f(this,ge).addObserver(this),f(this,ge).execute(e)}},ot=new WeakMap,at=new WeakMap,ge=new WeakMap,We=new WeakMap,Be=new WeakSet,Zr=function(){var t;const e=((t=f(this,ge))==null?void 0:t.state)??so();T(this,at,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},Ks=function(e){ce.batch(()=>{var t,s,n,i,o,a,c,l;if(f(this,We)&&this.hasListeners()){const u=f(this,at).variables,h=f(this,at).context;(e==null?void 0:e.type)==="success"?((s=(t=f(this,We)).onSuccess)==null||s.call(t,e.data,u,h),(i=(n=f(this,We)).onSettled)==null||i.call(n,e.data,null,u,h)):(e==null?void 0:e.type)==="error"&&((a=(o=f(this,We)).onError)==null||a.call(o,e.error,u,h),(l=(c=f(this,We)).onSettled)==null||l.call(c,void 0,e.error,u,h))}this.listeners.forEach(u=>{u(f(this,at))})})},Ki);function io(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var n=r.length;for(e=0;e<n;e++)r[e]&&(t=io(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function wa(){for(var r,e,t=0,s="",n=arguments.length;t<n;t++)(r=arguments[t])&&(e=io(r))&&(s&&(s+=" "),s+=e);return s}const Wn=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Bn=wa,_d=(r,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return Bn(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:n,defaultVariants:i}=e,o=Object.keys(n).map(l=>{const u=t==null?void 0:t[l],h=i==null?void 0:i[l];if(u===null)return null;const d=Wn(u)||Wn(h);return n[l][d]}),a=t&&Object.entries(t).reduce((l,u)=>{let[h,d]=u;return d===void 0||(l[h]=d),l},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((l,u)=>{let{class:h,className:d,...g}=u;return Object.entries(g).every(m=>{let[p,y]=m;return Array.isArray(y)?y.includes({...i,...a}[p]):{...i,...a}[p]===y})?[...l,h,d]:l},[]);return Bn(r,o,c,t==null?void 0:t.class,t==null?void 0:t.className)},vn="-",ba=r=>{const e=ka(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:o=>{const a=o.split(vn);return a[0]===""&&a.length!==1&&a.shift(),oo(a,e)||_a(o)},getConflictingClassGroupIds:(o,a)=>{const c=t[o]||[];return a&&s[o]?[...c,...s[o]]:c}}},oo=(r,e)=>{var o;if(r.length===0)return e.classGroupId;const t=r[0],s=e.nextPart.get(t),n=s?oo(r.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const i=r.join(vn);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},zn=/^\[(.+)\]$/,_a=r=>{if(zn.test(r)){const e=zn.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},ka=r=>{const{theme:e,classGroups:t}=r,s={nextPart:new Map,validators:[]};for(const n in t)Qs(t[n],s,n,e);return s},Qs=(r,e,t,s)=>{r.forEach(n=>{if(typeof n=="string"){const i=n===""?e:Hn(e,n);i.classGroupId=t;return}if(typeof n=="function"){if(Sa(n)){Qs(n(s),e,t,s);return}e.validators.push({validator:n,classGroupId:t});return}Object.entries(n).forEach(([i,o])=>{Qs(o,Hn(e,i),t,s)})})},Hn=(r,e)=>{let t=r;return e.split(vn).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},Sa=r=>r.isThemeGetter,xa=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const n=(i,o)=>{t.set(i,o),e++,e>r&&(e=0,s=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return n(i,o),o},set(i,o){t.has(i)?t.set(i,o):n(i,o)}}},Ys="!",Js=":",Oa=Js.length,Ta=r=>{const{prefix:e,experimentalParseClassName:t}=r;let s=n=>{const i=[];let o=0,a=0,c=0,l;for(let m=0;m<n.length;m++){let p=n[m];if(o===0&&a===0){if(p===Js){i.push(n.slice(c,m)),c=m+Oa;continue}if(p==="/"){l=m;continue}}p==="["?o++:p==="]"?o--:p==="("?a++:p===")"&&a--}const u=i.length===0?n:n.substring(c),h=Ea(u),d=h!==u,g=l&&l>c?l-c:void 0;return{modifiers:i,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:g}};if(e){const n=e+Js,i=s;s=o=>o.startsWith(n)?i(o.substring(n.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const n=s;s=i=>t({className:i,parseClassName:n})}return s},Ea=r=>r.endsWith(Ys)?r.substring(0,r.length-1):r.startsWith(Ys)?r.substring(1):r,Pa=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const n=[];let i=[];return s.forEach(o=>{o[0]==="["||e[o]?(n.push(...i.sort(),o),i=[]):i.push(o)}),n.push(...i.sort()),n}},Ca=r=>({cache:xa(r.cacheSize),parseClassName:Ta(r),sortModifiers:Pa(r),...ba(r)}),Aa=/\s+/,Ra=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:n,sortModifiers:i}=e,o=[],a=r.trim().split(Aa);let c="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{isExternal:h,modifiers:d,hasImportantModifier:g,baseClassName:m,maybePostfixModifierPosition:p}=t(u);if(h){c=u+(c.length>0?" "+c:c);continue}let y=!!p,_=s(y?m.substring(0,p):m);if(!_){if(!y){c=u+(c.length>0?" "+c:c);continue}if(_=s(m),!_){c=u+(c.length>0?" "+c:c);continue}y=!1}const k=i(d).join(":"),v=g?k+Ys:k,w=v+_;if(o.includes(w))continue;o.push(w);const S=n(_,y);for(let O=0;O<S.length;++O){const C=S[O];o.push(v+C)}c=u+(c.length>0?" "+c:c)}return c};function ja(){let r=0,e,t,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=ao(e))&&(s&&(s+=" "),s+=t);return s}const ao=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=ao(r[s]))&&(t&&(t+=" "),t+=e);return t};function Da(r,...e){let t,s,n,i=o;function o(c){const l=e.reduce((u,h)=>h(u),r());return t=Ca(l),s=t.cache.get,n=t.cache.set,i=a,a(c)}function a(c){const l=s(c);if(l)return l;const u=Ra(c,t);return n(c,u),u}return function(){return i(ja.apply(null,arguments))}}const re=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},co=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,lo=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ma=/^\d+\/\d+$/,Ia=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$a=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,La=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ua=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Fa=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,At=r=>Ma.test(r),L=r=>!!r&&!Number.isNaN(Number(r)),Ve=r=>!!r&&Number.isInteger(Number(r)),bs=r=>r.endsWith("%")&&L(r.slice(0,-1)),$e=r=>Ia.test(r),Na=()=>!0,qa=r=>$a.test(r)&&!La.test(r),uo=()=>!1,Wa=r=>Ua.test(r),Ba=r=>Fa.test(r),za=r=>!E(r)&&!P(r),Ha=r=>lr(r,go,uo),E=r=>co.test(r),dt=r=>lr(r,mo,qa),_s=r=>lr(r,Ya,L),Gn=r=>lr(r,ho,uo),Ga=r=>lr(r,fo,Ba),Br=r=>lr(r,po,Wa),P=r=>lo.test(r),mr=r=>ur(r,mo),Va=r=>ur(r,Ja),Vn=r=>ur(r,ho),Ka=r=>ur(r,go),Qa=r=>ur(r,fo),zr=r=>ur(r,po,!0),lr=(r,e,t)=>{const s=co.exec(r);return s?s[1]?e(s[1]):t(s[2]):!1},ur=(r,e,t=!1)=>{const s=lo.exec(r);return s?s[1]?e(s[1]):t:!1},ho=r=>r==="position"||r==="percentage",fo=r=>r==="image"||r==="url",go=r=>r==="length"||r==="size"||r==="bg-size",mo=r=>r==="length",Ya=r=>r==="number",Ja=r=>r==="family-name",po=r=>r==="shadow",Xa=()=>{const r=re("color"),e=re("font"),t=re("text"),s=re("font-weight"),n=re("tracking"),i=re("leading"),o=re("breakpoint"),a=re("container"),c=re("spacing"),l=re("radius"),u=re("shadow"),h=re("inset-shadow"),d=re("text-shadow"),g=re("drop-shadow"),m=re("blur"),p=re("perspective"),y=re("aspect"),_=re("ease"),k=re("animate"),v=()=>["auto","avoid","all","avoid-page","page","left","right","column"],w=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...w(),P,E],O=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],x=()=>[P,E,c],j=()=>[At,"full","auto",...x()],$=()=>[Ve,"none","subgrid",P,E],Q=()=>["auto",{span:["full",Ve,P,E]},Ve,P,E],B=()=>[Ve,"auto",P,E],Y=()=>["auto","min","max","fr",P,E],J=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],le=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...x()],V=()=>[At,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],b=()=>[r,P,E],A=()=>[...w(),Vn,Gn,{position:[P,E]}],D=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",Ka,Ha,{size:[P,E]}],X=()=>[bs,mr,dt],te=()=>["","none","full",l,P,E],ee=()=>["",L,mr,dt],Ge=()=>["solid","dashed","dotted","double"],Te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>[L,bs,Vn,Gn],An=()=>["","none",m,P,E],Ur=()=>["none",L,P,E],Fr=()=>["none",L,P,E],ps=()=>[L,P,E],Nr=()=>[At,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[$e],breakpoint:[$e],color:[Na],container:[$e],"drop-shadow":[$e],ease:["in","out","in-out"],font:[za],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[$e],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[$e],shadow:[$e],spacing:["px",L],text:[$e],"text-shadow":[$e],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",At,E,P,y]}],container:["container"],columns:[{columns:[L,E,P,a]}],"break-after":[{"break-after":v()}],"break-before":[{"break-before":v()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{start:j()}],end:[{end:j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[Ve,"auto",P,E]}],basis:[{basis:[At,"full","auto",a,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[L,At,"auto","initial","none",E]}],grow:[{grow:["",L,P,E]}],shrink:[{shrink:["",L,P,E]}],order:[{order:[Ve,"first","last","none",P,E]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:Q()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:Q()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Y()}],"auto-rows":[{"auto-rows":Y()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:[...J(),"normal"]}],"justify-items":[{"justify-items":[...le(),"normal"]}],"justify-self":[{"justify-self":["auto",...le()]}],"align-content":[{content:["normal",...J()]}],"align-items":[{items:[...le(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...le(),{baseline:["","last"]}]}],"place-content":[{"place-content":J()}],"place-items":[{"place-items":[...le(),"baseline"]}],"place-self":[{"place-self":["auto",...le()]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[a,"screen",...V()]}],"min-w":[{"min-w":[a,"screen","none",...V()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...V()]}],h:[{h:["screen","lh",...V()]}],"min-h":[{"min-h":["screen","lh","none",...V()]}],"max-h":[{"max-h":["screen","lh",...V()]}],"font-size":[{text:["base",t,mr,dt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,P,_s]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",bs,E]}],"font-family":[{font:[Va,E,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,P,E]}],"line-clamp":[{"line-clamp":[L,"none",P,_s]}],leading:[{leading:[i,...x()]}],"list-image":[{"list-image":["none",P,E]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",P,E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:b()}],"text-color":[{text:b()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[L,"from-font","auto",P,dt]}],"text-decoration-color":[{decoration:b()}],"underline-offset":[{"underline-offset":[L,"auto",P,E]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",P,E]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",P,E]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:A()}],"bg-repeat":[{bg:D()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ve,P,E],radial:["",P,E],conic:[Ve,P,E]},Qa,Ga]}],"bg-color":[{bg:b()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:b()}],"gradient-via":[{via:b()}],"gradient-to":[{to:b()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ge(),"hidden","none"]}],"divide-style":[{divide:[...Ge(),"hidden","none"]}],"border-color":[{border:b()}],"border-color-x":[{"border-x":b()}],"border-color-y":[{"border-y":b()}],"border-color-s":[{"border-s":b()}],"border-color-e":[{"border-e":b()}],"border-color-t":[{"border-t":b()}],"border-color-r":[{"border-r":b()}],"border-color-b":[{"border-b":b()}],"border-color-l":[{"border-l":b()}],"divide-color":[{divide:b()}],"outline-style":[{outline:[...Ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[L,P,E]}],"outline-w":[{outline:["",L,mr,dt]}],"outline-color":[{outline:b()}],shadow:[{shadow:["","none",u,zr,Br]}],"shadow-color":[{shadow:b()}],"inset-shadow":[{"inset-shadow":["none",h,zr,Br]}],"inset-shadow-color":[{"inset-shadow":b()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:b()}],"ring-offset-w":[{"ring-offset":[L,dt]}],"ring-offset-color":[{"ring-offset":b()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":b()}],"text-shadow":[{"text-shadow":["none",d,zr,Br]}],"text-shadow-color":[{"text-shadow":b()}],opacity:[{opacity:[L,P,E]}],"mix-blend":[{"mix-blend":[...Te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Te()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[L]}],"mask-image-linear-from-pos":[{"mask-linear-from":K()}],"mask-image-linear-to-pos":[{"mask-linear-to":K()}],"mask-image-linear-from-color":[{"mask-linear-from":b()}],"mask-image-linear-to-color":[{"mask-linear-to":b()}],"mask-image-t-from-pos":[{"mask-t-from":K()}],"mask-image-t-to-pos":[{"mask-t-to":K()}],"mask-image-t-from-color":[{"mask-t-from":b()}],"mask-image-t-to-color":[{"mask-t-to":b()}],"mask-image-r-from-pos":[{"mask-r-from":K()}],"mask-image-r-to-pos":[{"mask-r-to":K()}],"mask-image-r-from-color":[{"mask-r-from":b()}],"mask-image-r-to-color":[{"mask-r-to":b()}],"mask-image-b-from-pos":[{"mask-b-from":K()}],"mask-image-b-to-pos":[{"mask-b-to":K()}],"mask-image-b-from-color":[{"mask-b-from":b()}],"mask-image-b-to-color":[{"mask-b-to":b()}],"mask-image-l-from-pos":[{"mask-l-from":K()}],"mask-image-l-to-pos":[{"mask-l-to":K()}],"mask-image-l-from-color":[{"mask-l-from":b()}],"mask-image-l-to-color":[{"mask-l-to":b()}],"mask-image-x-from-pos":[{"mask-x-from":K()}],"mask-image-x-to-pos":[{"mask-x-to":K()}],"mask-image-x-from-color":[{"mask-x-from":b()}],"mask-image-x-to-color":[{"mask-x-to":b()}],"mask-image-y-from-pos":[{"mask-y-from":K()}],"mask-image-y-to-pos":[{"mask-y-to":K()}],"mask-image-y-from-color":[{"mask-y-from":b()}],"mask-image-y-to-color":[{"mask-y-to":b()}],"mask-image-radial":[{"mask-radial":[P,E]}],"mask-image-radial-from-pos":[{"mask-radial-from":K()}],"mask-image-radial-to-pos":[{"mask-radial-to":K()}],"mask-image-radial-from-color":[{"mask-radial-from":b()}],"mask-image-radial-to-color":[{"mask-radial-to":b()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":w()}],"mask-image-conic-pos":[{"mask-conic":[L]}],"mask-image-conic-from-pos":[{"mask-conic-from":K()}],"mask-image-conic-to-pos":[{"mask-conic-to":K()}],"mask-image-conic-from-color":[{"mask-conic-from":b()}],"mask-image-conic-to-color":[{"mask-conic-to":b()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:A()}],"mask-repeat":[{mask:D()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",P,E]}],filter:[{filter:["","none",P,E]}],blur:[{blur:An()}],brightness:[{brightness:[L,P,E]}],contrast:[{contrast:[L,P,E]}],"drop-shadow":[{"drop-shadow":["","none",g,zr,Br]}],"drop-shadow-color":[{"drop-shadow":b()}],grayscale:[{grayscale:["",L,P,E]}],"hue-rotate":[{"hue-rotate":[L,P,E]}],invert:[{invert:["",L,P,E]}],saturate:[{saturate:[L,P,E]}],sepia:[{sepia:["",L,P,E]}],"backdrop-filter":[{"backdrop-filter":["","none",P,E]}],"backdrop-blur":[{"backdrop-blur":An()}],"backdrop-brightness":[{"backdrop-brightness":[L,P,E]}],"backdrop-contrast":[{"backdrop-contrast":[L,P,E]}],"backdrop-grayscale":[{"backdrop-grayscale":["",L,P,E]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[L,P,E]}],"backdrop-invert":[{"backdrop-invert":["",L,P,E]}],"backdrop-opacity":[{"backdrop-opacity":[L,P,E]}],"backdrop-saturate":[{"backdrop-saturate":[L,P,E]}],"backdrop-sepia":[{"backdrop-sepia":["",L,P,E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",P,E]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[L,"initial",P,E]}],ease:[{ease:["linear","initial",_,P,E]}],delay:[{delay:[L,P,E]}],animate:[{animate:["none",k,P,E]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,P,E]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:Ur()}],"rotate-x":[{"rotate-x":Ur()}],"rotate-y":[{"rotate-y":Ur()}],"rotate-z":[{"rotate-z":Ur()}],scale:[{scale:Fr()}],"scale-x":[{"scale-x":Fr()}],"scale-y":[{"scale-y":Fr()}],"scale-z":[{"scale-z":Fr()}],"scale-3d":["scale-3d"],skew:[{skew:ps()}],"skew-x":[{"skew-x":ps()}],"skew-y":[{"skew-y":ps()}],transform:[{transform:[P,E,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Nr()}],"translate-x":[{"translate-x":Nr()}],"translate-y":[{"translate-y":Nr()}],"translate-z":[{"translate-z":Nr()}],"translate-none":["translate-none"],accent:[{accent:b()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:b()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",P,E]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",P,E]}],fill:[{fill:["none",...b()]}],"stroke-w":[{stroke:[L,mr,dt,_s]}],stroke:[{stroke:["none",...b()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},kd=Da(Xa);var ss=function(){return ss=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ss.apply(this,arguments)};function Za(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t}function Sd(r,e,t){if(t||arguments.length===2)for(var s=0,n=e.length,i;s<n;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return r.concat(i||Array.prototype.slice.call(e))}function ks(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function ec(r,e){var t=es.useState(function(){return{value:r,callback:e,facade:{get current(){return t.value},set current(s){var n=t.value;n!==s&&(t.value=s,t.callback(s,n))}}}})[0];return t.callback=e,t.facade}var tc=typeof window<"u"?es.useLayoutEffect:es.useEffect,Kn=new WeakMap;function xd(r,e){var t=ec(null,function(s){return r.forEach(function(n){return ks(n,s)})});return tc(function(){var s=Kn.get(t);if(s){var n=new Set(s),i=new Set(r),o=t.current;n.forEach(function(a){i.has(a)||ks(a,null)}),i.forEach(function(a){n.has(a)||ks(a,o)})}Kn.set(t,r)},[r]),t}function rc(r){return r}function sc(r,e){e===void 0&&(e=rc);var t=[],s=!1,n={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:r},useMedium:function(i){var o=e(i,s);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(s=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){s=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var c=function(){var u=o;o=[],u.forEach(i)},l=function(){return Promise.resolve().then(c)};l(),t={push:function(u){o.push(u),l()},filter:function(u){return o=o.filter(u),t}}}};return n}function Od(r){r===void 0&&(r={});var e=sc(null);return e.options=ss({async:!0,ssr:!1},r),e}var yo=function(r){var e=r.sideCar,t=Za(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return es.createElement(s,ss({},t))};yo.isSideCarExport=!0;function Td(r,e){return r.useMedium(e),yo}var Ed=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__},nc=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},Rt=new WeakMap,Hr=new WeakMap,Gr={},Ss=0,vo=function(r){return r&&(r.host||vo(r.parentNode))},ic=function(r,e){return e.map(function(t){if(r.contains(t))return t;var s=vo(t);return s&&r.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",r,". Doing nothing"),null)}).filter(function(t){return!!t})},oc=function(r,e,t,s){var n=ic(e,Array.isArray(r)?r:[r]);Gr[t]||(Gr[t]=new WeakMap);var i=Gr[t],o=[],a=new Set,c=new Set(n),l=function(h){!h||a.has(h)||(a.add(h),l(h.parentNode))};n.forEach(l);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(d){if(a.has(d))u(d);else try{var g=d.getAttribute(s),m=g!==null&&g!=="false",p=(Rt.get(d)||0)+1,y=(i.get(d)||0)+1;Rt.set(d,p),i.set(d,y),o.push(d),p===1&&m&&Hr.set(d,!0),y===1&&d.setAttribute(t,"true"),m||d.setAttribute(s,"true")}catch(_){console.error("aria-hidden: cannot operate on ",d,_)}})};return u(e),a.clear(),Ss++,function(){o.forEach(function(h){var d=Rt.get(h)-1,g=i.get(h)-1;Rt.set(h,d),i.set(h,g),d||(Hr.has(h)||h.removeAttribute(s),Hr.delete(h)),g||h.removeAttribute(t)}),Ss--,Ss||(Rt=new WeakMap,Rt=new WeakMap,Hr=new WeakMap,Gr={})}},Pd=function(r,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(r)?r:[r]),n=nc(r);return n?(s.push.apply(s,Array.from(n.querySelectorAll("[aria-live], script"))),oc(s,n,t,"aria-hidden")):function(){return null}},xs={exports:{}},Os={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qn;function ac(){if(Qn)return Os;Qn=1;var r=Xo();function e(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var t=typeof Object.is=="function"?Object.is:e,s=r.useState,n=r.useEffect,i=r.useLayoutEffect,o=r.useDebugValue;function a(h,d){var g=d(),m=s({inst:{value:g,getSnapshot:d}}),p=m[0].inst,y=m[1];return i(function(){p.value=g,p.getSnapshot=d,c(p)&&y({inst:p})},[h,g,d]),n(function(){return c(p)&&y({inst:p}),h(function(){c(p)&&y({inst:p})})},[h]),o(g),g}function c(h){var d=h.getSnapshot;h=h.value;try{var g=d();return!t(h,g)}catch{return!0}}function l(h,d){return d()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:a;return Os.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:u,Os}var Yn;function cc(){return Yn||(Yn=1,xs.exports=ac()),xs.exports}var Cd=cc();const lc=["top","right","bottom","left"],lt=Math.min,me=Math.max,ns=Math.round,Vr=Math.floor,De=r=>({x:r,y:r}),uc={left:"right",right:"left",bottom:"top",top:"bottom"},hc={start:"end",end:"start"};function Xs(r,e,t){return me(r,lt(e,t))}function ze(r,e){return typeof r=="function"?r(e):r}function He(r){return r.split("-")[0]}function hr(r){return r.split("-")[1]}function wn(r){return r==="x"?"y":"x"}function bn(r){return r==="y"?"height":"width"}const dc=new Set(["top","bottom"]);function Re(r){return dc.has(He(r))?"y":"x"}function _n(r){return wn(Re(r))}function fc(r,e,t){t===void 0&&(t=!1);const s=hr(r),n=_n(r),i=bn(n);let o=n==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=is(o)),[o,is(o)]}function gc(r){const e=is(r);return[Zs(r),e,Zs(e)]}function Zs(r){return r.replace(/start|end/g,e=>hc[e])}const Jn=["left","right"],Xn=["right","left"],mc=["top","bottom"],pc=["bottom","top"];function yc(r,e,t){switch(r){case"top":case"bottom":return t?e?Xn:Jn:e?Jn:Xn;case"left":case"right":return e?mc:pc;default:return[]}}function vc(r,e,t,s){const n=hr(r);let i=yc(He(r),t==="start",s);return n&&(i=i.map(o=>o+"-"+n),e&&(i=i.concat(i.map(Zs)))),i}function is(r){return r.replace(/left|right|bottom|top/g,e=>uc[e])}function wc(r){return{top:0,right:0,bottom:0,left:0,...r}}function wo(r){return typeof r!="number"?wc(r):{top:r,right:r,bottom:r,left:r}}function os(r){const{x:e,y:t,width:s,height:n}=r;return{width:s,height:n,top:t,left:e,right:e+s,bottom:t+n,x:e,y:t}}function Zn(r,e,t){let{reference:s,floating:n}=r;const i=Re(e),o=_n(e),a=bn(o),c=He(e),l=i==="y",u=s.x+s.width/2-n.width/2,h=s.y+s.height/2-n.height/2,d=s[a]/2-n[a]/2;let g;switch(c){case"top":g={x:u,y:s.y-n.height};break;case"bottom":g={x:u,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:h};break;case"left":g={x:s.x-n.width,y:h};break;default:g={x:s.x,y:s.y}}switch(hr(e)){case"start":g[o]-=d*(t&&l?-1:1);break;case"end":g[o]+=d*(t&&l?-1:1);break}return g}const bc=async(r,e,t)=>{const{placement:s="bottom",strategy:n="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:r,floating:e,strategy:n}),{x:u,y:h}=Zn(l,s,c),d=s,g={},m=0;for(let p=0;p<a.length;p++){const{name:y,fn:_}=a[p],{x:k,y:v,data:w,reset:S}=await _({x:u,y:h,initialPlacement:s,placement:d,strategy:n,middlewareData:g,rects:l,platform:o,elements:{reference:r,floating:e}});u=k??u,h=v??h,g={...g,[y]:{...g[y],...w}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(d=S.placement),S.rects&&(l=S.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:n}):S.rects),{x:u,y:h}=Zn(l,d,c)),p=-1)}return{x:u,y:h,placement:d,strategy:n,middlewareData:g}};async function Tr(r,e){var t;e===void 0&&(e={});const{x:s,y:n,platform:i,rects:o,elements:a,strategy:c}=r,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:g=0}=ze(e,r),m=wo(g),y=a[d?h==="floating"?"reference":"floating":h],_=os(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(y)))==null||t?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),k=h==="floating"?{x:s,y:n,width:o.floating.width,height:o.floating.height}:o.reference,v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),w=await(i.isElement==null?void 0:i.isElement(v))?await(i.getScale==null?void 0:i.getScale(v))||{x:1,y:1}:{x:1,y:1},S=os(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:k,offsetParent:v,strategy:c}):k);return{top:(_.top-S.top+m.top)/w.y,bottom:(S.bottom-_.bottom+m.bottom)/w.y,left:(_.left-S.left+m.left)/w.x,right:(S.right-_.right+m.right)/w.x}}const _c=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:s,placement:n,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:l,padding:u=0}=ze(r,e)||{};if(l==null)return{};const h=wo(u),d={x:t,y:s},g=_n(n),m=bn(g),p=await o.getDimensions(l),y=g==="y",_=y?"top":"left",k=y?"bottom":"right",v=y?"clientHeight":"clientWidth",w=i.reference[m]+i.reference[g]-d[g]-i.floating[m],S=d[g]-i.reference[g],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let C=O?O[v]:0;(!C||!await(o.isElement==null?void 0:o.isElement(O)))&&(C=a.floating[v]||i.floating[m]);const x=w/2-S/2,j=C/2-p[m]/2-1,$=lt(h[_],j),Q=lt(h[k],j),B=$,Y=C-p[m]-Q,J=C/2-p[m]/2+x,le=Xs(B,J,Y),G=!c.arrow&&hr(n)!=null&&J!==le&&i.reference[m]/2-(J<B?$:Q)-p[m]/2<0,V=G?J<B?J-B:J-Y:0;return{[g]:d[g]+V,data:{[g]:le,centerOffset:J-le-V,...G&&{alignmentOffset:V}},reset:G}}}),kc=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,s;const{placement:n,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...y}=ze(r,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const _=He(n),k=Re(a),v=He(a)===a,w=await(c.isRTL==null?void 0:c.isRTL(l.floating)),S=d||(v||!p?[is(a)]:gc(a)),O=m!=="none";!d&&O&&S.push(...vc(a,p,m,w));const C=[a,...S],x=await Tr(e,y),j=[];let $=((s=i.flip)==null?void 0:s.overflows)||[];if(u&&j.push(x[_]),h){const J=fc(n,o,w);j.push(x[J[0]],x[J[1]])}if($=[...$,{placement:n,overflows:j}],!j.every(J=>J<=0)){var Q,B;const J=(((Q=i.flip)==null?void 0:Q.index)||0)+1,le=C[J];if(le&&(!(h==="alignment"?k!==Re(le):!1)||$.every(b=>Re(b.placement)===k?b.overflows[0]>0:!0)))return{data:{index:J,overflows:$},reset:{placement:le}};let G=(B=$.filter(V=>V.overflows[0]<=0).sort((V,b)=>V.overflows[1]-b.overflows[1])[0])==null?void 0:B.placement;if(!G)switch(g){case"bestFit":{var Y;const V=(Y=$.filter(b=>{if(O){const A=Re(b.placement);return A===k||A==="y"}return!0}).map(b=>[b.placement,b.overflows.filter(A=>A>0).reduce((A,D)=>A+D,0)]).sort((b,A)=>b[1]-A[1])[0])==null?void 0:Y[0];V&&(G=V);break}case"initialPlacement":G=a;break}if(n!==G)return{reset:{placement:G}}}return{}}}};function ei(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function ti(r){return lc.some(e=>r[e]>=0)}const Sc=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...n}=ze(r,e);switch(s){case"referenceHidden":{const i=await Tr(e,{...n,elementContext:"reference"}),o=ei(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ti(o)}}}case"escaped":{const i=await Tr(e,{...n,altBoundary:!0}),o=ei(i,t.floating);return{data:{escapedOffsets:o,escaped:ti(o)}}}default:return{}}}}},bo=new Set(["left","top"]);async function xc(r,e){const{placement:t,platform:s,elements:n}=r,i=await(s.isRTL==null?void 0:s.isRTL(n.floating)),o=He(t),a=hr(t),c=Re(t)==="y",l=bo.has(o)?-1:1,u=i&&c?-1:1,h=ze(e,r);let{mainAxis:d,crossAxis:g,alignmentAxis:m}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof m=="number"&&(g=a==="end"?m*-1:m),c?{x:g*u,y:d*l}:{x:d*l,y:g*u}}const Oc=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,s;const{x:n,y:i,placement:o,middlewareData:a}=e,c=await xc(e,r);return o===((t=a.offset)==null?void 0:t.placement)&&(s=a.arrow)!=null&&s.alignmentOffset?{}:{x:n+c.x,y:i+c.y,data:{...c,placement:o}}}}},Tc=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:s,placement:n}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:_,y:k}=y;return{x:_,y:k}}},...c}=ze(r,e),l={x:t,y:s},u=await Tr(e,c),h=Re(He(n)),d=wn(h);let g=l[d],m=l[h];if(i){const y=d==="y"?"top":"left",_=d==="y"?"bottom":"right",k=g+u[y],v=g-u[_];g=Xs(k,g,v)}if(o){const y=h==="y"?"top":"left",_=h==="y"?"bottom":"right",k=m+u[y],v=m-u[_];m=Xs(k,m,v)}const p=a.fn({...e,[d]:g,[h]:m});return{...p,data:{x:p.x-t,y:p.y-s,enabled:{[d]:i,[h]:o}}}}}},Ec=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:s,placement:n,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=ze(r,e),u={x:t,y:s},h=Re(n),d=wn(h);let g=u[d],m=u[h];const p=ze(a,e),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const v=d==="y"?"height":"width",w=i.reference[d]-i.floating[v]+y.mainAxis,S=i.reference[d]+i.reference[v]-y.mainAxis;g<w?g=w:g>S&&(g=S)}if(l){var _,k;const v=d==="y"?"width":"height",w=bo.has(He(n)),S=i.reference[h]-i.floating[v]+(w&&((_=o.offset)==null?void 0:_[h])||0)+(w?0:y.crossAxis),O=i.reference[h]+i.reference[v]+(w?0:((k=o.offset)==null?void 0:k[h])||0)-(w?y.crossAxis:0);m<S?m=S:m>O&&(m=O)}return{[d]:g,[h]:m}}}},Pc=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,s;const{placement:n,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...l}=ze(r,e),u=await Tr(e,l),h=He(n),d=hr(n),g=Re(n)==="y",{width:m,height:p}=i.floating;let y,_;h==="top"||h==="bottom"?(y=h,_=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,y=d==="end"?"top":"bottom");const k=p-u.top-u.bottom,v=m-u.left-u.right,w=lt(p-u[y],k),S=lt(m-u[_],v),O=!e.middlewareData.shift;let C=w,x=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(x=v),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(C=k),O&&!d){const $=me(u.left,0),Q=me(u.right,0),B=me(u.top,0),Y=me(u.bottom,0);g?x=m-2*($!==0||Q!==0?$+Q:me(u.left,u.right)):C=p-2*(B!==0||Y!==0?B+Y:me(u.top,u.bottom))}await c({...e,availableWidth:x,availableHeight:C});const j=await o.getDimensions(a.floating);return m!==j.width||p!==j.height?{reset:{rects:!0}}:{}}}};function hs(){return typeof window<"u"}function dr(r){return _o(r)?(r.nodeName||"").toLowerCase():"#document"}function pe(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Ie(r){var e;return(e=(_o(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function _o(r){return hs()?r instanceof Node||r instanceof pe(r).Node:!1}function xe(r){return hs()?r instanceof Element||r instanceof pe(r).Element:!1}function Me(r){return hs()?r instanceof HTMLElement||r instanceof pe(r).HTMLElement:!1}function ri(r){return!hs()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof pe(r).ShadowRoot}const Cc=new Set(["inline","contents"]);function Mr(r){const{overflow:e,overflowX:t,overflowY:s,display:n}=Oe(r);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!Cc.has(n)}const Ac=new Set(["table","td","th"]);function Rc(r){return Ac.has(dr(r))}const jc=[":popover-open",":modal"];function ds(r){return jc.some(e=>{try{return r.matches(e)}catch{return!1}})}const Dc=["transform","translate","scale","rotate","perspective"],Mc=["transform","translate","scale","rotate","perspective","filter"],Ic=["paint","layout","strict","content"];function kn(r){const e=Sn(),t=xe(r)?Oe(r):r;return Dc.some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||Mc.some(s=>(t.willChange||"").includes(s))||Ic.some(s=>(t.contain||"").includes(s))}function $c(r){let e=ut(r);for(;Me(e)&&!or(e);){if(kn(e))return e;if(ds(e))return null;e=ut(e)}return null}function Sn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Lc=new Set(["html","body","#document"]);function or(r){return Lc.has(dr(r))}function Oe(r){return pe(r).getComputedStyle(r)}function fs(r){return xe(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function ut(r){if(dr(r)==="html")return r;const e=r.assignedSlot||r.parentNode||ri(r)&&r.host||Ie(r);return ri(e)?e.host:e}function ko(r){const e=ut(r);return or(e)?r.ownerDocument?r.ownerDocument.body:r.body:Me(e)&&Mr(e)?e:ko(e)}function Er(r,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const n=ko(r),i=n===((s=r.ownerDocument)==null?void 0:s.body),o=pe(n);if(i){const a=en(o);return e.concat(o,o.visualViewport||[],Mr(n)?n:[],a&&t?Er(a):[])}return e.concat(n,Er(n,[],t))}function en(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function So(r){const e=Oe(r);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const n=Me(r),i=n?r.offsetWidth:t,o=n?r.offsetHeight:s,a=ns(t)!==i||ns(s)!==o;return a&&(t=i,s=o),{width:t,height:s,$:a}}function xn(r){return xe(r)?r:r.contextElement}function Ht(r){const e=xn(r);if(!Me(e))return De(1);const t=e.getBoundingClientRect(),{width:s,height:n,$:i}=So(e);let o=(i?ns(t.width):t.width)/s,a=(i?ns(t.height):t.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Uc=De(0);function xo(r){const e=pe(r);return!Sn()||!e.visualViewport?Uc:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Fc(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==pe(r)?!1:e}function Pt(r,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const n=r.getBoundingClientRect(),i=xn(r);let o=De(1);e&&(s?xe(s)&&(o=Ht(s)):o=Ht(r));const a=Fc(i,t,s)?xo(i):De(0);let c=(n.left+a.x)/o.x,l=(n.top+a.y)/o.y,u=n.width/o.x,h=n.height/o.y;if(i){const d=pe(i),g=s&&xe(s)?pe(s):s;let m=d,p=en(m);for(;p&&s&&g!==m;){const y=Ht(p),_=p.getBoundingClientRect(),k=Oe(p),v=_.left+(p.clientLeft+parseFloat(k.paddingLeft))*y.x,w=_.top+(p.clientTop+parseFloat(k.paddingTop))*y.y;c*=y.x,l*=y.y,u*=y.x,h*=y.y,c+=v,l+=w,m=pe(p),p=en(m)}}return os({width:u,height:h,x:c,y:l})}function gs(r,e){const t=fs(r).scrollLeft;return e?e.left+t:Pt(Ie(r)).left+t}function Oo(r,e){const t=r.getBoundingClientRect(),s=t.left+e.scrollLeft-gs(r,t),n=t.top+e.scrollTop;return{x:s,y:n}}function Nc(r){let{elements:e,rect:t,offsetParent:s,strategy:n}=r;const i=n==="fixed",o=Ie(s),a=e?ds(e.floating):!1;if(s===o||a&&i)return t;let c={scrollLeft:0,scrollTop:0},l=De(1);const u=De(0),h=Me(s);if((h||!h&&!i)&&((dr(s)!=="body"||Mr(o))&&(c=fs(s)),Me(s))){const g=Pt(s);l=Ht(s),u.x=g.x+s.clientLeft,u.y=g.y+s.clientTop}const d=o&&!h&&!i?Oo(o,c):De(0);return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-c.scrollLeft*l.x+u.x+d.x,y:t.y*l.y-c.scrollTop*l.y+u.y+d.y}}function qc(r){return Array.from(r.getClientRects())}function Wc(r){const e=Ie(r),t=fs(r),s=r.ownerDocument.body,n=me(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=me(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-t.scrollLeft+gs(r);const a=-t.scrollTop;return Oe(s).direction==="rtl"&&(o+=me(e.clientWidth,s.clientWidth)-n),{width:n,height:i,x:o,y:a}}const si=25;function Bc(r,e){const t=pe(r),s=Ie(r),n=t.visualViewport;let i=s.clientWidth,o=s.clientHeight,a=0,c=0;if(n){i=n.width,o=n.height;const u=Sn();(!u||u&&e==="fixed")&&(a=n.offsetLeft,c=n.offsetTop)}const l=gs(s);if(l<=0){const u=s.ownerDocument,h=u.body,d=getComputedStyle(h),g=u.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,m=Math.abs(s.clientWidth-h.clientWidth-g);m<=si&&(i-=m)}else l<=si&&(i+=l);return{width:i,height:o,x:a,y:c}}const zc=new Set(["absolute","fixed"]);function Hc(r,e){const t=Pt(r,!0,e==="fixed"),s=t.top+r.clientTop,n=t.left+r.clientLeft,i=Me(r)?Ht(r):De(1),o=r.clientWidth*i.x,a=r.clientHeight*i.y,c=n*i.x,l=s*i.y;return{width:o,height:a,x:c,y:l}}function ni(r,e,t){let s;if(e==="viewport")s=Bc(r,t);else if(e==="document")s=Wc(Ie(r));else if(xe(e))s=Hc(e,t);else{const n=xo(r);s={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return os(s)}function To(r,e){const t=ut(r);return t===e||!xe(t)||or(t)?!1:Oe(t).position==="fixed"||To(t,e)}function Gc(r,e){const t=e.get(r);if(t)return t;let s=Er(r,[],!1).filter(a=>xe(a)&&dr(a)!=="body"),n=null;const i=Oe(r).position==="fixed";let o=i?ut(r):r;for(;xe(o)&&!or(o);){const a=Oe(o),c=kn(o);!c&&a.position==="fixed"&&(n=null),(i?!c&&!n:!c&&a.position==="static"&&!!n&&zc.has(n.position)||Mr(o)&&!c&&To(r,o))?s=s.filter(u=>u!==o):n=a,o=ut(o)}return e.set(r,s),s}function Vc(r){let{element:e,boundary:t,rootBoundary:s,strategy:n}=r;const o=[...t==="clippingAncestors"?ds(e)?[]:Gc(e,this._c):[].concat(t),s],a=o[0],c=o.reduce((l,u)=>{const h=ni(e,u,n);return l.top=me(h.top,l.top),l.right=lt(h.right,l.right),l.bottom=lt(h.bottom,l.bottom),l.left=me(h.left,l.left),l},ni(e,a,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Kc(r){const{width:e,height:t}=So(r);return{width:e,height:t}}function Qc(r,e,t){const s=Me(e),n=Ie(e),i=t==="fixed",o=Pt(r,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=De(0);function l(){c.x=gs(n)}if(s||!s&&!i)if((dr(e)!=="body"||Mr(n))&&(a=fs(e)),s){const g=Pt(e,!0,i,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else n&&l();i&&!s&&n&&l();const u=n&&!s&&!i?Oo(n,a):De(0),h=o.left+a.scrollLeft-c.x-u.x,d=o.top+a.scrollTop-c.y-u.y;return{x:h,y:d,width:o.width,height:o.height}}function Ts(r){return Oe(r).position==="static"}function ii(r,e){if(!Me(r)||Oe(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return Ie(r)===t&&(t=t.ownerDocument.body),t}function Eo(r,e){const t=pe(r);if(ds(r))return t;if(!Me(r)){let n=ut(r);for(;n&&!or(n);){if(xe(n)&&!Ts(n))return n;n=ut(n)}return t}let s=ii(r,e);for(;s&&Rc(s)&&Ts(s);)s=ii(s,e);return s&&or(s)&&Ts(s)&&!kn(s)?t:s||$c(r)||t}const Yc=async function(r){const e=this.getOffsetParent||Eo,t=this.getDimensions,s=await t(r.floating);return{reference:Qc(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Jc(r){return Oe(r).direction==="rtl"}const Xc={convertOffsetParentRelativeRectToViewportRelativeRect:Nc,getDocumentElement:Ie,getClippingRect:Vc,getOffsetParent:Eo,getElementRects:Yc,getClientRects:qc,getDimensions:Kc,getScale:Ht,isElement:xe,isRTL:Jc};function Po(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function Zc(r,e){let t=null,s;const n=Ie(r);function i(){var a;clearTimeout(s),(a=t)==null||a.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const l=r.getBoundingClientRect(),{left:u,top:h,width:d,height:g}=l;if(a||e(),!d||!g)return;const m=Vr(h),p=Vr(n.clientWidth-(u+d)),y=Vr(n.clientHeight-(h+g)),_=Vr(u),v={rootMargin:-m+"px "+-p+"px "+-y+"px "+-_+"px",threshold:me(0,lt(1,c))||1};let w=!0;function S(O){const C=O[0].intersectionRatio;if(C!==c){if(!w)return o();C?o(!1,C):s=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!Po(l,r.getBoundingClientRect())&&o(),w=!1}try{t=new IntersectionObserver(S,{...v,root:n.ownerDocument})}catch{t=new IntersectionObserver(S,v)}t.observe(r)}return o(!0),i}function Ad(r,e,t,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,l=xn(r),u=n||i?[...l?Er(l):[],...Er(e)]:[];u.forEach(_=>{n&&_.addEventListener("scroll",t,{passive:!0}),i&&_.addEventListener("resize",t)});const h=l&&a?Zc(l,t):null;let d=-1,g=null;o&&(g=new ResizeObserver(_=>{let[k]=_;k&&k.target===l&&g&&(g.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var v;(v=g)==null||v.observe(e)})),t()}),l&&!c&&g.observe(l),g.observe(e));let m,p=c?Pt(r):null;c&&y();function y(){const _=Pt(r);p&&!Po(p,_)&&t(),p=_,m=requestAnimationFrame(y)}return t(),()=>{var _;u.forEach(k=>{n&&k.removeEventListener("scroll",t),i&&k.removeEventListener("resize",t)}),h==null||h(),(_=g)==null||_.disconnect(),g=null,c&&cancelAnimationFrame(m)}}const Rd=Oc,jd=Tc,Dd=kc,Md=Pc,Id=Sc,$d=_c,Ld=Ec,Ud=(r,e,t)=>{const s=new Map,n={platform:Xc,...t},i={...n.platform,_c:s};return bc(r,e,{...n,platform:i})};function el(r,e,t="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:r,timeZoneName:t}).format(e).split(/\s/g).slice(2).join(" ")}const Es={},wr={};function vt(r,e){try{const s=(Es[r]||(Es[r]=new Intl.DateTimeFormat("en-US",{timeZone:r,timeZoneName:"longOffset"}).format))(e).split("GMT")[1];return s in wr?wr[s]:oi(s,s.split(":"))}catch{if(r in wr)return wr[r];const t=r==null?void 0:r.match(tl);return t?oi(r,t.slice(1)):NaN}}const tl=/([+-]\d\d):?(\d\d)?/;function oi(r,e){const t=+(e[0]||0),s=+(e[1]||0),n=+(e[2]||0)/60;return wr[r]=t*60+s>0?t*60+s+n:t*60-s-n}class je extends Date{constructor(...e){super(),e.length>1&&typeof e[e.length-1]=="string"&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(vt(this.timeZone,this))?this.setTime(NaN):e.length?typeof e[0]=="number"&&(e.length===1||e.length===2&&typeof e[1]!="number")?this.setTime(e[0]):typeof e[0]=="string"?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),Co(this),tn(this)):this.setTime(Date.now())}static tz(e,...t){return t.length?new je(...t,e):new je(Date.now(),e)}withTimeZone(e){return new je(+this,e)}getTimezoneOffset(){const e=-vt(this.timeZone,this);return e>0?Math.floor(e):Math.ceil(e)}setTime(e){return Date.prototype.setTime.apply(this,arguments),tn(this),+this}[Symbol.for("constructDateFrom")](e){return new je(+new Date(e),this.timeZone)}}const ai=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(r=>{if(!ai.test(r))return;const e=r.replace(ai,"$1UTC");je.prototype[e]&&(r.startsWith("get")?je.prototype[r]=function(){return this.internal[e]()}:(je.prototype[r]=function(){return Date.prototype[e].apply(this.internal,arguments),rl(this),+this},je.prototype[e]=function(){return Date.prototype[e].apply(this,arguments),tn(this),+this}))});function tn(r){r.internal.setTime(+r),r.internal.setUTCSeconds(r.internal.getUTCSeconds()-Math.round(-vt(r.timeZone,r)*60))}function rl(r){Date.prototype.setFullYear.call(r,r.internal.getUTCFullYear(),r.internal.getUTCMonth(),r.internal.getUTCDate()),Date.prototype.setHours.call(r,r.internal.getUTCHours(),r.internal.getUTCMinutes(),r.internal.getUTCSeconds(),r.internal.getUTCMilliseconds()),Co(r)}function Co(r){const e=vt(r.timeZone,r),t=e>0?Math.floor(e):Math.ceil(e),s=new Date(+r);s.setUTCHours(s.getUTCHours()-1);const n=-new Date(+r).getTimezoneOffset(),i=-new Date(+s).getTimezoneOffset(),o=n-i,a=Date.prototype.getHours.apply(r)!==r.internal.getUTCHours();o&&a&&r.internal.setUTCMinutes(r.internal.getUTCMinutes()+o);const c=n-t;c&&Date.prototype.setUTCMinutes.call(r,Date.prototype.getUTCMinutes.call(r)+c);const l=new Date(+r);l.setUTCSeconds(0);const u=n>0?l.getSeconds():(l.getSeconds()-60)%60,h=Math.round(-(vt(r.timeZone,r)*60))%60;(h||u)&&(r.internal.setUTCSeconds(r.internal.getUTCSeconds()+h),Date.prototype.setUTCSeconds.call(r,Date.prototype.getUTCSeconds.call(r)+h+u));const d=vt(r.timeZone,r),g=d>0?Math.floor(d):Math.ceil(d),p=-new Date(+r).getTimezoneOffset()-g,y=g!==t,_=p-c;if(y&&_){Date.prototype.setUTCMinutes.call(r,Date.prototype.getUTCMinutes.call(r)+_);const k=vt(r.timeZone,r),v=k>0?Math.floor(k):Math.ceil(k),w=g-v;w&&(r.internal.setUTCMinutes(r.internal.getUTCMinutes()+w),Date.prototype.setUTCMinutes.call(r,Date.prototype.getUTCMinutes.call(r)+w))}}class br extends je{static tz(e,...t){return t.length?new br(...t,e):new br(Date.now(),e)}toISOString(){const[e,t,s]=this.tzComponents(),n=`${e}${t}:${s}`;return this.internal.toISOString().slice(0,-1)+n}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,t,s,n]=this.internal.toUTCString().split(" ");return`${e==null?void 0:e.slice(0,-1)} ${s} ${t} ${n}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[t,s,n]=this.tzComponents();return`${e} GMT${t}${s}${n} (${el(this.timeZone,this)})`}toLocaleString(e,t){return Date.prototype.toLocaleString.call(this,e,{...t,timeZone:(t==null?void 0:t.timeZone)||this.timeZone})}toLocaleDateString(e,t){return Date.prototype.toLocaleDateString.call(this,e,{...t,timeZone:(t==null?void 0:t.timeZone)||this.timeZone})}toLocaleTimeString(e,t){return Date.prototype.toLocaleTimeString.call(this,e,{...t,timeZone:(t==null?void 0:t.timeZone)||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset(),t=e>0?"-":"+",s=String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),n=String(Math.abs(e)%60).padStart(2,"0");return[t,s,n]}withTimeZone(e){return new br(+this,e)}[Symbol.for("constructDateFrom")](e){return new br(+new Date(e),this.timeZone)}}const Ao=6048e5,sl=864e5,ci=Symbol.for("constructDateFrom");function ie(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&ci in r?r[ci](e):r instanceof Date?new r.constructor(e):new Date(e)}function W(r,e){return ie(e||r,r)}function nl(r,e,t){const s=W(r,t==null?void 0:t.in);return isNaN(e)?ie(r,NaN):(e&&s.setDate(s.getDate()+e),s)}function il(r,e,t){const s=W(r,t==null?void 0:t.in);if(isNaN(e))return ie(r,NaN);if(!e)return s;const n=s.getDate(),i=ie(r,s.getTime());i.setMonth(s.getMonth()+e+1,0);const o=i.getDate();return n>=o?i:(s.setFullYear(i.getFullYear(),i.getMonth(),n),s)}let ol={};function Ir(){return ol}function Pr(r,e){var a,c,l,u;const t=Ir(),s=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((u=(l=t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??0,n=W(r,e==null?void 0:e.in),i=n.getDay(),o=(i<s?7:0)+i-s;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function as(r,e){return Pr(r,{...e,weekStartsOn:1})}function Ro(r,e){const t=W(r,e==null?void 0:e.in),s=t.getFullYear(),n=ie(t,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);const i=as(n),o=ie(t,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const a=as(o);return t.getTime()>=i.getTime()?s+1:t.getTime()>=a.getTime()?s:s-1}function li(r){const e=W(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function fr(r,...e){const t=ie.bind(null,e.find(s=>typeof s=="object"));return e.map(t)}function cs(r,e){const t=W(r,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function al(r,e,t){const[s,n]=fr(t==null?void 0:t.in,r,e),i=cs(s),o=cs(n),a=+i-li(i),c=+o-li(o);return Math.round((a-c)/sl)}function cl(r,e){const t=Ro(r,e),s=ie(r,0);return s.setFullYear(t,0,4),s.setHours(0,0,0,0),as(s)}function Fd(r,e,t){return nl(r,e*7,t)}function Nd(r,e,t){return il(r,e*12,t)}function qd(r,e){let t,s=e==null?void 0:e.in;return r.forEach(n=>{!s&&typeof n=="object"&&(s=ie.bind(null,n));const i=W(n,s);(!t||t<i||isNaN(+i))&&(t=i)}),ie(s,t||NaN)}function Wd(r,e){let t,s=e==null?void 0:e.in;return r.forEach(n=>{!s&&typeof n=="object"&&(s=ie.bind(null,n));const i=W(n,s);(!t||t>i||isNaN(+i))&&(t=i)}),ie(s,t||NaN)}function Bd(r,e,t){const[s,n]=fr(t==null?void 0:t.in,r,e);return+cs(s)==+cs(n)}function ll(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function ul(r){return!(!ll(r)&&typeof r!="number"||isNaN(+W(r)))}function zd(r,e,t){const[s,n]=fr(t==null?void 0:t.in,r,e),i=s.getFullYear()-n.getFullYear(),o=s.getMonth()-n.getMonth();return i*12+o}function Hd(r,e){const t=W(r,e==null?void 0:e.in),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function hl(r,e){const[t,s]=fr(r,e.start,e.end);return{start:t,end:s}}function Gd(r,e){const{start:t,end:s}=hl(e==null?void 0:e.in,r);let n=+t>+s;const i=n?+t:+s,o=n?s:t;o.setHours(0,0,0,0),o.setDate(1);let a=1;const c=[];for(;+o<=i;)c.push(ie(t,o)),o.setMonth(o.getMonth()+a);return n?c.reverse():c}function Vd(r,e){const t=W(r,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function Kd(r,e){const t=W(r,e==null?void 0:e.in),s=t.getFullYear();return t.setFullYear(s+1,0,0),t.setHours(23,59,59,999),t}function dl(r,e){const t=W(r,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function fl(r,e){var a,c,l,u;const t=Ir(),s=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((u=(l=t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??0,n=W(r,e==null?void 0:e.in),i=n.getDay(),o=(i<s?-7:0)+6-(i-s);return n.setDate(n.getDate()+o),n.setHours(23,59,59,999),n}function Qd(r,e){return fl(r,{...e,weekStartsOn:1})}const gl={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ml=(r,e,t)=>{let s;const n=gl[r];return typeof n=="string"?s=n:e===1?s=n.one:s=n.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function Ps(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const pl={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yl={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vl={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wl={date:Ps({formats:pl,defaultWidth:"full"}),time:Ps({formats:yl,defaultWidth:"full"}),dateTime:Ps({formats:vl,defaultWidth:"full"})},bl={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_l=(r,e,t,s)=>bl[r];function pr(r){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let n;if(s==="formatting"&&r.formattingValues){const o=r.defaultFormattingWidth||r.defaultWidth,a=t!=null&&t.width?String(t.width):o;n=r.formattingValues[a]||r.formattingValues[o]}else{const o=r.defaultWidth,a=t!=null&&t.width?String(t.width):r.defaultWidth;n=r.values[a]||r.values[o]}const i=r.argumentCallback?r.argumentCallback(e):e;return n[i]}}const kl={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Sl={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xl={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ol={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Tl={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},El={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Pl=(r,e)=>{const t=Number(r),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Cl={ordinalNumber:Pl,era:pr({values:kl,defaultWidth:"wide"}),quarter:pr({values:Sl,defaultWidth:"wide",argumentCallback:r=>r-1}),month:pr({values:xl,defaultWidth:"wide"}),day:pr({values:Ol,defaultWidth:"wide"}),dayPeriod:pr({values:Tl,defaultWidth:"wide",formattingValues:El,defaultFormattingWidth:"wide"})};function yr(r){return(e,t={})=>{const s=t.width,n=s&&r.matchPatterns[s]||r.matchPatterns[r.defaultMatchWidth],i=e.match(n);if(!i)return null;const o=i[0],a=s&&r.parsePatterns[s]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(a)?Rl(a,h=>h.test(o)):Al(a,h=>h.test(o));let l;l=r.valueCallback?r.valueCallback(c):c,l=t.valueCallback?t.valueCallback(l):l;const u=e.slice(o.length);return{value:l,rest:u}}}function Al(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function Rl(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function jl(r){return(e,t={})=>{const s=e.match(r.matchPattern);if(!s)return null;const n=s[0],i=e.match(r.parsePattern);if(!i)return null;let o=r.valueCallback?r.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(n.length);return{value:o,rest:a}}}const Dl=/^(\d+)(th|st|nd|rd)?/i,Ml=/\d+/i,Il={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$l={any:[/^b/i,/^(a|c)/i]},Ll={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ul={any:[/1/i,/2/i,/3/i,/4/i]},Fl={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Nl={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ql={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Wl={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Bl={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zl={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Hl={ordinalNumber:jl({matchPattern:Dl,parsePattern:Ml,valueCallback:r=>parseInt(r,10)}),era:yr({matchPatterns:Il,defaultMatchWidth:"wide",parsePatterns:$l,defaultParseWidth:"any"}),quarter:yr({matchPatterns:Ll,defaultMatchWidth:"wide",parsePatterns:Ul,defaultParseWidth:"any",valueCallback:r=>r+1}),month:yr({matchPatterns:Fl,defaultMatchWidth:"wide",parsePatterns:Nl,defaultParseWidth:"any"}),day:yr({matchPatterns:ql,defaultMatchWidth:"wide",parsePatterns:Wl,defaultParseWidth:"any"}),dayPeriod:yr({matchPatterns:Bl,defaultMatchWidth:"any",parsePatterns:zl,defaultParseWidth:"any"})},Gl={code:"en-US",formatDistance:ml,formatLong:wl,formatRelative:_l,localize:Cl,match:Hl,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Vl(r,e){const t=W(r,e==null?void 0:e.in);return al(t,dl(t))+1}function Kl(r,e){const t=W(r,e==null?void 0:e.in),s=+as(t)-+cl(t);return Math.round(s/Ao)+1}function jo(r,e){var u,h,d,g;const t=W(r,e==null?void 0:e.in),s=t.getFullYear(),n=Ir(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(d=n.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??1,o=ie((e==null?void 0:e.in)||r,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const a=Pr(o,e),c=ie((e==null?void 0:e.in)||r,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const l=Pr(c,e);return+t>=+a?s+1:+t>=+l?s:s-1}function Ql(r,e){var a,c,l,u;const t=Ir(),s=(e==null?void 0:e.firstWeekContainsDate)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(l=t.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??1,n=jo(r,e),i=ie((e==null?void 0:e.in)||r,0);return i.setFullYear(n,0,s),i.setHours(0,0,0,0),Pr(i,e)}function Yl(r,e){const t=W(r,e==null?void 0:e.in),s=+Pr(t,e)-+Ql(t,e);return Math.round(s/Ao)+1}function q(r,e){const t=r<0?"-":"",s=Math.abs(r).toString().padStart(e,"0");return t+s}const Ke={y(r,e){const t=r.getFullYear(),s=t>0?t:1-t;return q(e==="yy"?s%100:s,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):q(t+1,2)},d(r,e){return q(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return q(r.getHours()%12||12,e.length)},H(r,e){return q(r.getHours(),e.length)},m(r,e){return q(r.getMinutes(),e.length)},s(r,e){return q(r.getSeconds(),e.length)},S(r,e){const t=e.length,s=r.getMilliseconds(),n=Math.trunc(s*Math.pow(10,t-3));return q(n,e.length)}},jt={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ui={G:function(r,e,t){const s=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const s=r.getFullYear(),n=s>0?s:1-s;return t.ordinalNumber(n,{unit:"year"})}return Ke.y(r,e)},Y:function(r,e,t,s){const n=jo(r,s),i=n>0?n:1-n;if(e==="YY"){const o=i%100;return q(o,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):q(i,e.length)},R:function(r,e){const t=Ro(r);return q(t,e.length)},u:function(r,e){const t=r.getFullYear();return q(t,e.length)},Q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return q(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return q(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(r,e,t){const s=r.getMonth();switch(e){case"M":case"MM":return Ke.M(r,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(r,e,t){const s=r.getMonth();switch(e){case"L":return String(s+1);case"LL":return q(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(r,e,t,s){const n=Yl(r,s);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):q(n,e.length)},I:function(r,e,t){const s=Kl(r);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):q(s,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Ke.d(r,e)},D:function(r,e,t){const s=Vl(r);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):q(s,e.length)},E:function(r,e,t){const s=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(r,e,t,s){const n=r.getDay(),i=(n-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return q(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(r,e,t,s){const n=r.getDay(),i=(n-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return q(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(r,e,t){const s=r.getDay(),n=s===0?7:s;switch(e){case"i":return String(n);case"ii":return q(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(r,e,t){const n=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(r,e,t){const s=r.getHours();let n;switch(s===12?n=jt.noon:s===0?n=jt.midnight:n=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(r,e,t){const s=r.getHours();let n;switch(s>=17?n=jt.evening:s>=12?n=jt.afternoon:s>=4?n=jt.morning:n=jt.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let s=r.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return Ke.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Ke.H(r,e)},K:function(r,e,t){const s=r.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):q(s,e.length)},k:function(r,e,t){let s=r.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):q(s,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Ke.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Ke.s(r,e)},S:function(r,e){return Ke.S(r,e)},X:function(r,e,t){const s=r.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return di(s);case"XXXX":case"XX":return mt(s);case"XXXXX":case"XXX":default:return mt(s,":")}},x:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"x":return di(s);case"xxxx":case"xx":return mt(s);case"xxxxx":case"xxx":default:return mt(s,":")}},O:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+hi(s,":");case"OOOO":default:return"GMT"+mt(s,":")}},z:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+hi(s,":");case"zzzz":default:return"GMT"+mt(s,":")}},t:function(r,e,t){const s=Math.trunc(+r/1e3);return q(s,e.length)},T:function(r,e,t){return q(+r,e.length)}};function hi(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),n=Math.trunc(s/60),i=s%60;return i===0?t+String(n):t+String(n)+e+q(i,2)}function di(r,e){return r%60===0?(r>0?"-":"+")+q(Math.abs(r)/60,2):mt(r,e)}function mt(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),n=q(Math.trunc(s/60),2),i=q(s%60,2);return t+n+e+i}const fi=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Do=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Jl=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],s=t[1],n=t[2];if(!n)return fi(r,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",fi(s,e)).replace("{{time}}",Do(n,e))},Xl={p:Do,P:Jl},Zl=/^D+$/,eu=/^Y+$/,tu=["D","DD","YY","YYYY"];function ru(r){return Zl.test(r)}function su(r){return eu.test(r)}function nu(r,e,t){const s=iu(r,e,t);if(console.warn(s),tu.includes(r))throw new RangeError(s)}function iu(r,e,t){const s=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ou=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,au=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cu=/^'([^]*?)'?$/,lu=/''/g,uu=/[a-zA-Z]/;function Yd(r,e,t){var u,h,d,g,m,p,y,_;const s=Ir(),n=(t==null?void 0:t.locale)??s.locale??Gl,i=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(d=s.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((p=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??s.weekStartsOn??((_=(y=s.locale)==null?void 0:y.options)==null?void 0:_.weekStartsOn)??0,a=W(r,t==null?void 0:t.in);if(!ul(a))throw new RangeError("Invalid time value");let c=e.match(au).map(k=>{const v=k[0];if(v==="p"||v==="P"){const w=Xl[v];return w(k,n.formatLong)}return k}).join("").match(ou).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const v=k[0];if(v==="'")return{isToken:!1,value:hu(k)};if(ui[v])return{isToken:!0,value:k};if(v.match(uu))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:k}});n.localize.preprocessor&&(c=n.localize.preprocessor(a,c));const l={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return c.map(k=>{if(!k.isToken)return k.value;const v=k.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&su(v)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&ru(v))&&nu(v,e,String(r));const w=ui[v[0]];return w(a,v,n.localize,l)}).join("")}function hu(r){const e=r.match(cu);return e?e[1].replace(lu,"'"):r}function du(r,e){const t=W(r,e==null?void 0:e.in),s=t.getFullYear(),n=t.getMonth(),i=ie(t,0);return i.setFullYear(s,n+1,0),i.setHours(0,0,0,0),i.getDate()}function Jd(r,e){return W(r,e==null?void 0:e.in).getMonth()}function Xd(r,e){return W(r,e==null?void 0:e.in).getFullYear()}function Zd(r,e){return+W(r)>+W(e)}function ef(r,e){return+W(r)<+W(e)}function tf(r,e,t){const[s,n]=fr(t==null?void 0:t.in,r,e);return s.getFullYear()===n.getFullYear()&&s.getMonth()===n.getMonth()}function rf(r,e,t){const[s,n]=fr(t==null?void 0:t.in,r,e);return s.getFullYear()===n.getFullYear()}function sf(r,e,t){const s=W(r,t==null?void 0:t.in),n=s.getFullYear(),i=s.getDate(),o=ie(r,0);o.setFullYear(n,e,15),o.setHours(0,0,0,0);const a=du(o);return s.setMonth(e,Math.min(i,a)),s}function nf(r,e,t){const s=W(r,t==null?void 0:t.in);return isNaN(+s)?ie(r,NaN):(s.setFullYear(e),s)}const fu="modulepreload",gu=function(r){return"/"+r},gi={},$r=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){let o=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=o(t.map(l=>{if(l=gu(l),l in gi)return;gi[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":fu,u||(d.as="script"),d.crossOrigin="",d.href=l,c&&d.setAttribute("nonce",c),document.head.appendChild(d),u)return new Promise((g,m)=>{d.addEventListener("load",g),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},mu=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>$r(async()=>{const{default:s}=await Promise.resolve().then(()=>gr);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class On extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class pu extends On{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class mi extends On{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class pi extends On{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var rn;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(rn||(rn={}));var yu=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};class vu{constructor(e,{headers:t={},customFetch:s,region:n=rn.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=mu(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return yu(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=t;let a={},{region:c}=t;c||(c=this.region);const l=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,l.searchParams.set("forceFunctionRegion",c));let u;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(l.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:u}).catch(p=>{throw new pu(p)}),d=h.headers.get("x-relay-error");if(d&&d==="true")throw new mi(h);if(!h.ok)throw new pi(h);let g=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),m;return g==="application/json"?m=yield h.json():g==="application/octet-stream"?m=yield h.blob():g==="text/event-stream"?m=h:g==="multipart/form-data"?m=yield h.formData():m=yield h.text(),{data:m,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof pi||n instanceof mi?n.context:void 0}}})}}var oe={},Dt={},Mt={},It={},$t={},Lt={},wu=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ar=wu();const bu=ar.fetch,Mo=ar.fetch.bind(ar),Io=ar.Headers,_u=ar.Request,ku=ar.Response,gr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Io,Request:_u,Response:ku,default:Mo,fetch:bu},Symbol.toStringTag,{value:"Module"})),Su=ea(gr);var Kr={},yi;function $o(){if(yi)return Kr;yi=1,Object.defineProperty(Kr,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Kr.default=r,Kr}var vi;function Lo(){if(vi)return Lt;vi=1;var r=Lt&&Lt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Lt,"__esModule",{value:!0});const e=r(Su),t=r($o());class s{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let c=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,h,d,g;let m=null,p=null,y=null,_=l.status,k=l.statusText;if(l.ok){if(this.method!=="HEAD"){const O=await l.text();O===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?p=O:p=JSON.parse(O))}const w=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),S=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");w&&S&&S.length>1&&(y=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(m={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,y=null,_=406,k="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const w=await l.text();try{m=JSON.parse(w),Array.isArray(m)&&l.status===404&&(p=[],m=null,_=200,k="OK")}catch{l.status===404&&w===""?(_=204,k="No Content"):m={message:w}}if(m&&this.isMaybeSingle&&(!((g=m==null?void 0:m.details)===null||g===void 0)&&g.includes("0 rows"))&&(m=null,_=200,k="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:p,count:y,status:_,statusText:k}});return this.shouldThrowOnError||(c=c.catch(l=>{var u,h,d;return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(h=l==null?void 0:l.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(d=l==null?void 0:l.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,o)}returns(){return this}overrideTypes(){return this}}return Lt.default=s,Lt}var wi;function Uo(){if(wi)return $t;wi=1;var r=$t&&$t.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty($t,"__esModule",{value:!0});const e=r(Lo());class t extends e.default{select(n){let i=!1;const o=(n??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:c=a}={}){const l=c?`${c}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${n}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${n}`),this}range(n,i,{foreignTable:o,referencedTable:a=o}={}){const c=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(l,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:c=!1,format:l="text"}={}){var u;const h=[n?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,c?"wal":null].filter(Boolean).join("|"),d=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${d}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}}return $t.default=t,$t}var bi;function Tn(){if(bi)return It;bi=1;var r=It&&It.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(It,"__esModule",{value:!0});const e=r(Uo());class t extends e.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(n,`in.(${o})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:o,type:a}={}){let c="";a==="plain"?c="pl":a==="phrase"?c="ph":a==="websearch"&&(c="w");const l=o===void 0?"":`(${o})`;return this.url.searchParams.append(n,`${c}fts${l}.${i}`),this}match(n){return Object.entries(n).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(n,i,o){return this.url.searchParams.append(n,`not.${i}.${o}`),this}or(n,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${n})`),this}filter(n,i,o){return this.url.searchParams.append(n,`${i}.${o}`),this}}return It.default=t,It}var _i;function Fo(){if(_i)return Mt;_i=1;var r=Mt&&Mt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Mt,"__esModule",{value:!0});const e=r(Tn());class t{constructor(n,{headers:i={},schema:o,fetch:a}){this.url=n,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(n,{head:i=!1,count:o}={}){const a=i?"HEAD":"GET";let c=!1;const l=(n??"*").split("").map(u=>/\s/.test(u)&&!c?"":(u==='"'&&(c=!c),u)).join("");return this.url.searchParams.set("select",l),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:i,defaultToNull:o=!0}={}){var a;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const l=n.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(l.length>0){const u=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(n,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:c=!0}={}){var l;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const h=n.reduce((d,g)=>d.concat(Object.keys(g)),[]);if(h.length>0){const d=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(n,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:n}={}){var i;const o="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Mt.default=t,Mt}var ki;function xu(){if(ki)return Dt;ki=1;var r=Dt&&Dt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Dt,"__esModule",{value:!0});const e=r(Fo()),t=r(Tn());class s{constructor(i,{headers:o={},schema:a,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=c}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new s(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:c=!1,count:l}={}){var u;let h;const d=new URL(`${this.url}/rpc/${i}`);let g;a||c?(h=a?"HEAD":"GET",Object.entries(o).filter(([p,y])=>y!==void 0).map(([p,y])=>[p,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([p,y])=>{d.searchParams.append(p,y)})):(h="POST",g=o);const m=new Headers(this.headers);return l&&m.set("Prefer",`count=${l}`),new t.default({method:h,url:d,headers:m,schema:this.schemaName,body:g,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Dt.default=s,Dt}var Si;function Ou(){if(Si)return oe;Si=1;var r=oe&&oe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(oe,"__esModule",{value:!0}),oe.PostgrestError=oe.PostgrestBuilder=oe.PostgrestTransformBuilder=oe.PostgrestFilterBuilder=oe.PostgrestQueryBuilder=oe.PostgrestClient=void 0;const e=r(xu());oe.PostgrestClient=e.default;const t=r(Fo());oe.PostgrestQueryBuilder=t.default;const s=r(Tn());oe.PostgrestFilterBuilder=s.default;const n=r(Uo());oe.PostgrestTransformBuilder=n.default;const i=r(Lo());oe.PostgrestBuilder=i.default;const o=r($o());return oe.PostgrestError=o.default,oe.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:o.default},oe}var Tu=Ou();const Eu=Zo(Tu),{PostgrestClient:Pu,PostgrestQueryBuilder:of,PostgrestFilterBuilder:af,PostgrestTransformBuilder:cf,PostgrestBuilder:lf,PostgrestError:uf}=Eu;class Cu{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Au="2.15.1",Ru=`realtime-js/${Au}`,ju="1.0.0",sn=1e4,Du=1e3,Mu=100;var kr;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(kr||(kr={}));var se;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(se||(se={}));var Se;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Se||(Se={}));var nn;(function(r){r.websocket="websocket"})(nn||(nn={}));var yt;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(yt||(yt={}));class Iu{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+n));o=o+n;const c=s.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class No{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var z;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(z||(z={}));const xi=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=$u(o,r,e,n),i),{})},$u=(r,e,t,s)=>{const n=e.find(a=>a.name===r),i=n==null?void 0:n.type,o=t[r];return i&&!s.includes(i)?qo(i,o):on(o)},qo=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Nu(e,t)}switch(r){case z.bool:return Lu(e);case z.float4:case z.float8:case z.int2:case z.int4:case z.int8:case z.numeric:case z.oid:return Uu(e);case z.json:case z.jsonb:return Fu(e);case z.timestamp:return qu(e);case z.abstime:case z.date:case z.daterange:case z.int4range:case z.int8range:case z.money:case z.reltime:case z.text:case z.time:case z.timestamptz:case z.timetz:case z.tsrange:case z.tstzrange:return on(e);default:return on(e)}},on=r=>r,Lu=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Uu=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Fu=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Nu=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>qo(e,a))}return r},qu=r=>typeof r=="string"?r.replace(" ","T"):r,Wo=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Cs{constructor(e,t,s={},n=sn){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Oi;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Oi||(Oi={}));class Sr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sr.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=Sr.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Sr.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const h=i[l];if(h){const d=u.map(y=>y.presence_ref),g=h.map(y=>y.presence_ref),m=u.filter(y=>g.indexOf(y.presence_ref)<0),p=h.filter(y=>d.indexOf(y.presence_ref)<0);m.length>0&&(a[l]=m),p.length>0&&(c[l]=p)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const h=e[a].map(g=>g.presence_ref),d=u.filter(g=>h.indexOf(g.presence_ref)<0);e[a].unshift(...d)}s(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(h=>h.presence_ref);l=l.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=l,n(a,l,c),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ti;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Ti||(Ti={}));var xr;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(xr||(xr={}));var Fe;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Fe||(Fe={}));class En{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Cs(this,Se.join,this.params,this.timeout),this.rejoinTimer=new No(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=se.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Se.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Sr(this),this.broadcastEndpointURL=Wo(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==se.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,c=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(d=>d.filter))!==null&&n!==void 0?n:[],l=!!this.bindings[xr.PRESENCE]&&this.bindings[xr.PRESENCE].length>0,u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:l}),postgres_changes:c,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(d=>e==null?void 0:e(Fe.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Fe.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var g;if(this.socket.setAuth(),d===void 0){e==null||e(Fe.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,p=(g=m==null?void 0:m.length)!==null&&g!==void 0?g:0,y=[];for(let _=0;_<p;_++){const k=m[_],{filter:{event:v,schema:w,table:S,filter:O}}=k,C=d&&d[_];if(C&&C.event===v&&C.schema===w&&C.table===S&&C.filter===O)y.push(Object.assign(Object.assign({},k),{id:C.id}));else{this.unsubscribe(),this.state=se.errored,e==null||e(Fe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Fe.SUBSCRIBED);return}}).receive("error",d=>{this.state=se.errored,e==null||e(Fe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Fe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===se.joined&&e===xr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=l.body)===null||n===void 0?void 0:n.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=se.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Se.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Cs(this,Se.leave,{},e),s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=se.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Cs(this,e,t,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Mu){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Se;if(s&&[a,c,l,u].indexOf(o)>=0&&s!==this._joinRef())return;let d=this._onMessage(o,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var m,p,y;return((m=g.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(p=g.filter)===null||p===void 0?void 0:p.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(g=>g.callback(d,s)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var m,p,y,_,k,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const w=g.id,S=(m=g.filter)===null||m===void 0?void 0:m.event;return w&&((p=t.ids)===null||p===void 0?void 0:p.includes(w))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const w=(k=(_=g==null?void 0:g.filter)===null||_===void 0?void 0:_.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return w==="*"||w===((v=t==null?void 0:t.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof d=="object"&&"ids"in d){const m=d.data,{schema:p,table:y,commit_timestamp:_,type:k,errors:v}=m;d=Object.assign(Object.assign({},{schema:p,table:y,commit_timestamp:_,eventType:k,new:{},old:{},errors:v}),this._getPayloadRecords(m))}g.callback(d,s)})}_isClosed(){return this.state===se.closed}_isJoined(){return this.state===se.joined}_isJoining(){return this.state===se.joining}_isLeaving(){return this.state===se.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&En.isEqual(n.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Se.close,{},e)}_onError(e){this._on(Se.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=xi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=xi(e.columns,e.old_record)),t}}const Ei=()=>{},Qr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Wu=[1e3,2e3,5e3,1e4],Bu=1e4,zu=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Hu{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sn,this.transport=null,this.heartbeatIntervalMs=Qr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ei,this.ref=0,this.reconnectTimer=null,this.logger=Ei,this.conn=null,this.sendBuffer=[],this.serializer=new Iu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...o)=>$r(async()=>{const{default:a}=await Promise.resolve().then(()=>gr);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${nn.websocket}`,this.httpEndpoint=Wo(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Cu.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ju}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case kr.connecting:return yt.Connecting;case kr.open:return yt.Open;case kr.closing:return yt.Closing;default:return yt.Closed}}isConnected(){return this.connectionState()===yt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new En(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Du,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Qr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:i,ref:o}=t,a=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${n} ${a}`.trim(),i),this.channels.filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Se.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([zu],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const n={access_token:t,version:Ru};t&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(Se.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new No(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,n,i,o,a,c,l;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:sn,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:Qr.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=e==null?void 0:e.reconnectAfterMs)!==null&&a!==void 0?a:(u=>Wu[u-1]||Bu),this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:((u,h)=>h(JSON.stringify(u))),this.decode=(l=e==null?void 0:e.decode)!==null&&l!==void 0?l:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Pn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ne(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Gu extends Pn{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class an extends Pn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Vu=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};const Bo=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>$r(async()=>{const{default:s}=await Promise.resolve().then(()=>gr);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Ku=()=>Vu(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $r(()=>Promise.resolve().then(()=>gr),void 0)).Response:Response}),cn=r=>{if(Array.isArray(r))return r.map(t=>cn(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=cn(s)}),e},Qu=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var Ct=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};const As=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Yu=(r,e,t)=>Ct(void 0,void 0,void 0,function*(){const s=yield Ku();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{const i=r.status||500,o=(n==null?void 0:n.statusCode)||i+"";e(new Gu(As(n),i,o))}).catch(n=>{e(new an(As(n),n))}):e(new an(As(r),r))}),Ju=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!s?n:(Qu(s)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),t))};function Lr(r,e,t,s,n,i){return Ct(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,Ju(e,s,n,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Yu(c,a,s))})})}function ls(r,e,t,s){return Ct(this,void 0,void 0,function*(){return Lr(r,"GET",e,t,s)})}function Ee(r,e,t,s,n){return Ct(this,void 0,void 0,function*(){return Lr(r,"POST",e,s,n,t)})}function ln(r,e,t,s,n){return Ct(this,void 0,void 0,function*(){return Lr(r,"PUT",e,s,n,t)})}function Xu(r,e,t,s){return Ct(this,void 0,void 0,function*(){return Lr(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function zo(r,e,t,s,n){return Ct(this,void 0,void 0,function*(){return Lr(r,"DELETE",e,s,n,t)})}var ue=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};const Zu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class eh{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Bo(n)}uploadOrUpdate(e,t,s,n){return ue(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Pi),n);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),h=yield(e=="PUT"?ln:Ee)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:l,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}})}upload(e,t,s){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return ue(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const l=Object.assign({upsert:Pi.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",l.cacheControl)):(c=s,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const h=yield ln(this.fetch,a.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(ne(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return ue(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield Ee(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Pn("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}})}update(e,t,s){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return ue(this,void 0,void 0,function*(){try{return{data:yield Ee(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}})}copy(e,t,s){return ue(this,void 0,void 0,function*(){try{return{data:{path:(yield Ee(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return ue(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Ee(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return ue(this,void 0,void 0,function*(){try{const n=yield Ee(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}})}download(e,t){return ue(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield ls(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ne(a))return{data:null,error:a};throw a}})}info(e){return ue(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield ls(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:cn(s),error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}})}exists(e){return ue(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Xu(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ne(s)&&s instanceof an){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${l}`)}}}remove(e){return ue(this,void 0,void 0,function*(){try{return{data:yield zo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}})}list(e,t,s){return ue(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Zu),t),{prefix:e||""});return{data:yield Ee(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}})}listV2(e,t){return ue(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Ee(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const th="2.11.0",rh={"X-Client-Info":`storage-js/${th}`};var Ut=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};class sh{constructor(e,t={},s,n){const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},rh),t),this.fetch=Bo(s)}listBuckets(){return Ut(this,void 0,void 0,function*(){try{return{data:yield ls(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ne(e))return{data:null,error:e};throw e}})}getBucket(e){return Ut(this,void 0,void 0,function*(){try{return{data:yield ls(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ut(this,void 0,void 0,function*(){try{return{data:yield Ee(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Ut(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Ut(this,void 0,void 0,function*(){try{return{data:yield Ee(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ut(this,void 0,void 0,function*(){try{return{data:yield zo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}})}}class nh extends sh{constructor(e,t={},s,n){super(e,t,s,n)}from(e){return new eh(this.url,this.headers,e,this.fetch)}}const ih="2.56.0";let _r="";typeof Deno<"u"?_r="deno":typeof document<"u"?_r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_r="react-native":_r="node";const oh={"X-Client-Info":`supabase-js-${_r}/${ih}`},ah={headers:oh},ch={schema:"public"},lh={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uh={};var hh=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};const dh=r=>{let e;return r?e=r:typeof fetch>"u"?e=Mo:e=fetch,(...t)=>e(...t)},fh=()=>typeof Headers>"u"?Io:Headers,gh=(r,e,t)=>{const s=dh(t),n=fh();return(i,o)=>hh(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:r;let l=new n(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",r),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:l}))})};var mh=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};function ph(r){return r.endsWith("/")?r:r+"/"}function yh(r,e){var t,s;const{db:n,auth:i,realtime:o,global:a}=r,{db:c,auth:l,realtime:u,global:h}=e,d={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>mh(this,void 0,void 0,function*(){return""})};return r.accessToken?d.accessToken=r.accessToken:delete d.accessToken,d}const Ho="2.71.1",Bt=30*1e3,un=3,Rs=un*Bt,vh="http://localhost:9999",wh="supabase.auth.token",bh={"X-Client-Info":`gotrue-js/${Ho}`},hn="X-Supabase-Api-Version",Go={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_h=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,kh=600*1e3;class Cn extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function M(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Sh extends Cn{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function xh(r){return M(r)&&r.name==="AuthApiError"}class Vo extends Cn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ht extends Cn{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Je extends ht{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Oh(r){return M(r)&&r.name==="AuthSessionMissingError"}class Yr extends ht{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jr extends ht{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Xr extends ht{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Th(r){return M(r)&&r.name==="AuthImplicitGrantRedirectError"}class Ci extends ht{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dn extends ht{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function js(r){return M(r)&&r.name==="AuthRetryableFetchError"}class Ai extends ht{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class fn extends ht{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const us="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ri=` 	
\r=`.split(""),Eh=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Ri.length;e+=1)r[Ri[e].charCodeAt(0)]=-2;for(let e=0;e<us.length;e+=1)r[us[e].charCodeAt(0)]=e;return r})();function ji(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(us[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(us[s]),e.queuedBits-=6}}function Ko(r,e,t){const s=Eh[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Di(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{Ah(o,s,t)};for(let o=0;o<r.length;o+=1)Ko(r.charCodeAt(o),n,i);return e.join("")}function Ph(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Ch(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}Ph(s,e)}}function Ah(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Rh(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)Ko(r.charCodeAt(n),t,s);return new Uint8Array(e)}function jh(r){const e=[];return Ch(r,t=>e.push(t)),new Uint8Array(e)}function Dh(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return r.forEach(n=>ji(n,t,s)),ji(null,t,s),e.join("")}function Mh(r){return Math.round(Date.now()/1e3)+r}function Ih(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const be=()=>typeof window<"u"&&typeof document<"u",ft={tested:!1,writable:!1},Qo=()=>{if(!be())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ft.tested)return ft.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ft.tested=!0,ft.writable=!0}catch{ft.tested=!0,ft.writable=!1}return ft.writable};function $h(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const Yo=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>$r(async()=>{const{default:s}=await Promise.resolve().then(()=>gr);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Lh=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",zt=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},gt=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Qe=async(r,e)=>{await r.removeItem(e)};class ms{constructor(){this.promise=new ms.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ms.promiseConstructor=Promise;function Ds(r){const e=r.split(".");if(e.length!==3)throw new fn("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!_h.test(e[s]))throw new fn("JWT not in base64url format");return{header:JSON.parse(Di(e[0])),payload:JSON.parse(Di(e[1])),signature:Rh(e[2]),raw:{header:e[0],payload:e[1]}}}async function Uh(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Fh(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Nh(r){return("0"+r.toString(16)).substr(-2)}function qh(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Nh).join("")}async function Wh(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Bh(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Wh(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ft(r,e,t=!1){const s=qh();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await zt(r,`${e}-code-verifier`,n);const i=await Bh(s);return[i,s===i?"plain":"s256"]}const zh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Hh(r){const e=r.headers.get(hn);if(!e||!e.match(zh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Gh(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Vh(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Kh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nt(r){if(!Kh.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ms(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Mi(r){return JSON.parse(JSON.stringify(r))}var Qh=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const pt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Yh=[502,503,504];async function Ii(r){var e;if(!Lh(r))throw new dn(pt(r),0);if(Yh.includes(r.status))throw new dn(pt(r),r.status);let t;try{t=await r.json()}catch(i){throw new Vo(pt(i),i)}let s;const n=Hh(r);if(n&&n.getTime()>=Go["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Ai(pt(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Je}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ai(pt(t),r.status,t.weak_password.reasons);throw new Sh(pt(t),r.status||500,s)}const Jh=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function U(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[hn]||(i[hn]=Go["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Xh(r,e,t+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Xh(r,e,t,s,n,i){const o=Jh(e,s,n,i);let a;try{a=await r(t,Object.assign({},o))}catch(c){throw console.error(c),new dn(pt(c),0)}if(a.ok||await Ii(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(c){await Ii(c)}}function Ue(r){var e;let t=null;rd(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Mh(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function $i(r){const e=Ue(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Xe(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Zh(r){return{data:r,error:null}}function ed(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,o=Qh(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function td(r){return r}function rd(r){return r.access_token&&r.refresh_token&&r.expires_in}const Is=["global","local","others"];var sd=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class nd{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Yo(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Is[0]){if(Is.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Is.join(", ")}`);try{return await U(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(M(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await U(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Xe})}catch(s){if(M(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=sd(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await U(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:ed,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(M(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await U(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xe})}catch(t){if(M(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await U(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:td});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(m=>{const p=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);l[`${y}Page`]=p}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(M(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Nt(e);try{return await U(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xe})}catch(t){if(M(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Nt(e);try{return await U(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Xe})}catch(s){if(M(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Nt(e);try{return await U(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Xe})}catch(s){if(M(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Nt(e.userId);try{const{data:t,error:s}=await U(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(M(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Nt(e.userId),Nt(e.id);try{return{data:await U(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}}}function Li(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function id(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qt={debug:!!(globalThis&&Qo()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class od extends Jo{}async function ad(r,e,t){qt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),qt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){qt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{qt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw qt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new od(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(qt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}id();const cd={url:vh,storageKey:wh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bh,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ui(r,e,t){return await t()}const Wt={};class Cr{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Cr.nextInstanceID,Cr.nextInstanceID+=1,this.instanceID>0&&be()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},cd),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new nd({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Yo(n.fetch),this.lock=n.lock||Ui,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:be()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ad:this.lock=Ui,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:Qo()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Li(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Li(this.memoryStorage)),be()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Wt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Wt[this.storageKey]=Object.assign(Object.assign({},Wt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Wt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Wt[this.storageKey]=Object.assign(Object.assign({},Wt[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ho}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=$h(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),be()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Th(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return M(t)?{error:t}:{error:new Vo("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const i=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Ue}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(M(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{let i;if("email"in e){const{email:u,password:h,options:d}=e;let g=null,m=null;this.flowType==="pkce"&&([g,m]=await Ft(this.storage,this.storageKey)),i=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:g,code_challenge_method:m},xform:Ue})}else if("phone"in e){const{phone:u,password:h,options:d}=e;i=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},channel:(n=d==null?void 0:d.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Ue})}else throw new Jr("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(M(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:$i})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:$i})}else throw new Jr("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Yr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,i,o,a,c,l,u,h,d,g;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:y,wallet:_,statement:k,options:v}=e;let w;if(be())if(typeof _=="object")w=_;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))w=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=_}const S=new URL((t=v==null?void 0:v.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in w&&w.signIn){const O=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),k?{statement:k}:null));let C;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")C=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)C=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)m=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),p=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${S.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(n=(s=v==null?void 0:v.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const O=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=O}}try{const{data:y,error:_}=await U(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Dh(p)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ue});if(_)throw _;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Yr}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:_})}catch(y){if(M(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const t=await gt(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:i,error:o}=await U(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ue});if(await Qe(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Yr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(M(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:i,nonce:o}=e,a=await U(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ue}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Yr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Ft(this.storage,this.storageKey));const{error:h}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Jr("You must provide either an email or phone number.")}catch(a){if(M(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,s;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await U(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Ue});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ft(this.storage,this.storageKey)),await U(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Zh})}catch(i){if(M(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Je;const{error:n}=await U(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(M(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await U(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:a}=await U(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Jr("You must provide either an email or phone number and a type")}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await gt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Rs:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await gt(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Ms()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xe}):await this._useSession(async t=>{var s,n,i;const{data:o,error:a}=t;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Je}:await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Xe})})}catch(t){if(M(t))return Oh(t)&&(await this._removeSession(),await Qe(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Je;const o=n.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Ft(this.storage,this.storageKey));const{data:l,error:u}=await U(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:Xe});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(M(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Je;const t=Date.now()/1e3;let s=t,n=!0,i=null;const{payload:o}=Ds(e.access_token);if(o.exp&&(s=o.exp,n=s<=t),n){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(M(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Je;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!be())throw new Xr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Ci("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ci("No code detected.");const{data:k,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new Xr("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let d=u+h;c&&(d=parseInt(c));const g=d-u;g*1e3<=Bt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const m=d-h;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,d,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,d,u);const{data:p,error:y}=await this._getUser(i);if(y)throw y;const _={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:d,refresh_token:o,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(s){if(M(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await gt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(xh(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Qe(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Ih(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Ft(this.storage,this.storageKey,!0));try{return await U(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(M(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var o,a,c,l,u;const{data:h,error:d}=i;if(d)throw d;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await U(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return be()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(M(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)throw o;return await U(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(M(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Fh(async n=>(n>0&&await Uh(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await U(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ue})),(n,i)=>{const o=200*Math.pow(2,n);return i&&js(i)&&Date.now()+o-s<Bt})}catch(s){if(this._debug(t,"error",s),M(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),be()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await gt(this.storage,this.storageKey);if(n&&this.userStorage){let o=await gt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await zt(this.userStorage,this.storageKey+"-user",o)),n.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Ms()}else if(n&&!n.user&&!n.user){const o=await gt(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(n.user=o.user,await Qe(this.storage,this.storageKey+"-user"),await zt(this.storage,this.storageKey,n)):n.user=Ms()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Rs;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Rs}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),js(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(n.access_token);!a&&(o!=null&&o.user)?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Je;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ms;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Je;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),M(i)){const o={session:null,error:i};return js(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await zt(this.userStorage,this.storageKey+"-user",{user:t.user});const n=Object.assign({},t);delete n.user;const i=Mi(n);await zt(this.storage,this.storageKey,i)}else{const n=Mi(t);await zt(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Qe(this.storage,this.storageKey),await Qe(this.storage,this.storageKey+"-code-verifier"),await Qe(this.storage,this.storageKey+"-user"),this.userStorage&&await Qe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&be()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Bt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Bt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Bt}ms, refresh threshold is ${un} ticks`),n<=un&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Jo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!be()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ft(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await U(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(M(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await U(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(M(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await U(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(M(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await U(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(M(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ds(n.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(a=>a.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(a=>a.kid===e),s&&this.jwks_cached_at+kh>n)return s;const{data:i,error:o}=await U(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,s=i.keys.find(a=>a.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:g,error:m}=await this.getSession();if(m||!g.session)return{data:null,error:m};s=g.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:c}}=Ds(s);t!=null&&t.allowExpired||Gh(i.exp);const l=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!l){const{error:g}=await this.getUser(s);if(g)throw g;return{data:{claims:i,header:n,signature:o},error:null}}const u=Vh(n.alg),h=await crypto.subtle.importKey("jwk",l,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,jh(`${a}.${c}`)))throw new fn("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(s){if(M(s))return{data:null,error:s};throw s}}}Cr.nextInstanceID=0;const ld=Cr;class ud extends ld{constructor(e){super(e)}}var hd=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):n(u.value).then(a,c)}l((s=s.apply(r,e||[])).next())})};class dd{constructor(e,t,s){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=ph(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:ch,realtime:uh,auth:Object.assign(Object.assign({},lh),{storageKey:l}),global:ah},h=yh(s??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=gh(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Pu(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new nh(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new vu(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return hd(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,lock:a,debug:c},l,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ud({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Hu(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const hf=(r,e,t)=>new dd(r,e,t);function fd(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}fd()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");export{cs as $,Nd as A,al as B,zd as C,Gd as D,Qd as E,Hd as F,fl as G,Kd as H,Yd as I,Kl as J,Jd as K,Xd as L,bd as M,Yl as N,Zd as O,ef as P,wd as Q,ll as R,Bd as S,br as T,tf as U,rf as V,qd as W,Wd as X,sf as Y,nf as Z,Za as _,ve as a,as as a0,Vd as a1,Pr as a2,dl as a3,Gl as a4,kd as a5,wa as a6,_d as a7,vd as a8,hf as a9,ss as b,Od as c,Ed as d,Sd as e,Td as f,Zo as g,Pd as h,ir as i,Cd as j,Ud as k,jd as l,Dd as m,ce as n,Rd as o,Md as p,Id as q,pd as r,yd as s,Ld as t,xd as u,$d as v,Ad as w,nl as x,il as y,Fd as z};
